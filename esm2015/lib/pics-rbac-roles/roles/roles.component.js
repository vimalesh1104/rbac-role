import { __awaiter } from "tslib";
import { Component } from '@angular/core';
import { Validators } from '@angular/forms';
import { AppConstants } from '../@core/constants/app-constants';
import { RBACINFO } from '../@core/urls/rbac-url.config';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "../@core/service/alert.service";
import * as i3 from "../@core/service/microstrategy.service";
import * as i4 from "../@core/service/rbac.service";
import * as i5 from "../@core/service/data-store.service";
import * as i6 from "../@shared/alert/alert.component";
import * as i7 from "primeng/card";
import * as i8 from "primeng/multiselect";
import * as i9 from "primeng/dropdown";
import * as i10 from "primeng/tabmenu";
import * as i11 from "primeng/accordion";
import * as i12 from "primeng/tree";
import * as i13 from "../@core/directives/permission.directive";
import * as i14 from "@angular/common";
import * as i15 from "../@core/directives/show-field.directives";
import * as i16 from "primeng/inputtext";
import * as i17 from "primeng/api";
export class RolesComponent {
    constructor(injector, formBuilder, alertService, mstrService, rolesService, _storeservice, permissionService) {
        this.formBuilder = formBuilder;
        this.alertService = alertService;
        this.mstrService = mstrService;
        this.rolesService = rolesService;
        this._storeservice = _storeservice;
        this.permissionService = permissionService;
        this.roleList = [];
        this.filteredRoleList = [];
        this.selectedPermissionsGroup = [];
        this.userroles = [];
        this.modelRoleName = '';
        this.permissions = [];
        this.landingPage = [];
        this.RBACORG = new RBACINFO();
        this.items = [];
        this.mainMenuList = [];
        this.reArrangedList = [];
        this.menuList = [];
        this.subMenuList = [];
        this.parent = [];
        this.childMenuList = [];
        this.showChildren = false;
        this.parentMenulist = [];
        this.buildTree = (parentId) => (item) => {
            const children = this.menuList.filter((child) => child.parentid === item.id);
            return Object.assign(Object.assign({}, item), (children.length > 0 && { children: children.map(this.buildTree(item.id)) }));
        };
        this.formSubmit = false;
        this.orgSubs = this._storeservice.currentStore.subscribe((res) => {
            if (res['RBACORG'] && res['RBACORG'] !== '') {
                this.formSubmit = false;
                this.permissionAllow = false;
                this.RBACORG = res['RBACORG'];
                this.environment = this.RBACORG['environment'];
                this.orgId = parseInt(this.RBACORG['orgID']);
                this.httpService = res['HTTPSERVICE'];
            }
        });
        this.items = [
            {
                label: 'Permissions',
                icon: '',
                command: event => {
                    this.activateMenu(event);
                }
            },
            {
                label: 'Menu Ordering',
                icon: '',
                command: event => {
                    this.activateMenu(event);
                }
            }
        ];
        this.activeItem = this.items[0];
        this.firstTab = true;
    }
    nestedData() {
        this.mainMenuList = this.menuList.filter((item) => !item.parentid).map(this.buildTree(null));
    }
    ngOnInit() {
        console.log();
        this.initializeform();
        this.getReportDashboard();
        this.getRoleList();
        this.getPolicyGroupList();
        this.getLandingPage();
    }
    ngOnDestroy() {
        this.orgSubs.unsubscribe();
    }
    initializeform() {
        this.roleForm = this.formBuilder.group({
            name: ['', Validators.required],
            defaultpageid: ['', Validators.required],
            parentid: [2],
            policyGroupId: ['', Validators.required],
            dossierid: ['']
        });
    }
    get formValidate() {
        return this.roleForm.controls;
    }
    getLandingPage() {
        this.rolesService.getLandingPage('1').subscribe((res) => {
            if (res) {
                this.landingPage = res['data'].filter((x) => x.route.charAt(0) === '/');
            }
        }, (error) => console.log(error));
    }
    getRoleList(_key) {
        this.rolesService.getAllUserRole(this.orgId).subscribe((res) => {
            this.roleList = res['data'].filter((a) => a.name !== 'Super admin');
            this.filteredRoleList = this.roleList;
        }, (err) => console.log(err));
    }
    getPolicyGroupList(_managementGroupId) {
        this.rolesService.getOrgPolicyGroupList(this.orgId).subscribe((res) => {
            this.policyGroupList = res['data'];
        }, (err) => console.log(err));
    }
    searchRole(event) {
        const value = event.target.value.toLowerCase();
        this.filteredRoleList = this.roleList.filter(a => { var _a; return (_a = a === null || a === void 0 ? void 0 : a.name) === null || _a === void 0 ? void 0 : _a.toLowerCase().startsWith(value); });
    }
    getRoleInfo(roleid) {
        this.roleId = roleid;
        if (roleid) {
            this.isDisabled = true;
            this.rolesService.getRoleById(roleid).subscribe((res) => {
                this.permissionAllow = true;
                this.roleInformation(res);
            });
        }
        else {
            this.roleForm.reset();
            this.permissions = [];
            this.isDisabled = false;
            this.isDisabledOther = false;
            this.roleForm.enable();
        }
    }
    roleInformation(res) {
        var _a, _b, _c;
        this.roleForm.patchValue({
            name: res.data.name,
            defaultpageid: res.data.defaultpageid,
            parentid: res.data.parentid,
            policyGroupId: ((_a = res === null || res === void 0 ? void 0 : res.data) === null || _a === void 0 ? void 0 : _a.policyGroups.filter((item) => item).map((item) => {
                return item['id'];
            })) || [],
            dossierid: (_b = JSON.parse(res.data.dossierid)) === null || _b === void 0 ? void 0 : _b.id
        });
        this.permissions = [...(_c = res === null || res === void 0 ? void 0 : res.data) === null || _c === void 0 ? void 0 : _c.permissions];
        this.permissions = this.permissions
            .map(f => {
            return Object.assign({ isFormBuilder: false }, f);
        })
            .map(g => {
            if (g.key === 'FORM') {
                g.isFormBuilder = true;
            }
            else {
                g.isFormBuilder = false;
            }
            return g;
        });
        this.selectedPermissionsGroup = [];
        if (res.data.permissions && res.data.permissions.length) {
            res.data.permissions.forEach((ele) => {
                this.getSelectedPermisions(ele);
            });
        }
        this.isDisabledOther = !this.hasAccess;
        const isAdmin = this.userroles.find(({ name }) => name === 'Admin');
        if (isAdmin) {
            this.roleForm.enable();
            this.isDisabledOther = false;
        }
        else if (!this.hasAccess || res.isreadonly) {
            this.roleForm.controls['name'].disable();
        }
        else {
            this.roleForm.enable();
        }
    }
    get hasAccess() {
        return this.userroles.find(({ id, name }) => id === this.roleId || name === 'Admin');
    }
    isPrivilage(permission) {
        var _a;
        if (permission && (permission === null || permission === void 0 ? void 0 : permission.permissions) && ((_a = permission === null || permission === void 0 ? void 0 : permission.permissions) === null || _a === void 0 ? void 0 : _a.length) > 0) {
            return true;
        }
        else {
            return false;
        }
    }
    selectAllPage(index, event) {
        event.stopPropagation();
        this.permissions[index].checked = event.target.checked;
        this.setSelectedPermisions(event.target.checked, this.permissions[index].id, this.permissions[index].checked, this.permissions[index].checkedwrite);
        this.permissions[index].permissions.forEach((page) => {
            page.checked = event.target.checked;
            page.checkedwrite = event.target.checked;
            this.setSelectedPermisions(event.target.checked, page.id, page.checked, page.checkedwrite);
            page.permissions.forEach((privilege) => {
                privilege.checked = event.target.checked;
                privilege.checkedwrite = event.target.checked;
                this.setSelectedPermisions(event.target.checked, privilege.id, privilege.checked, privilege.checkedwrite);
            });
        });
    }
    getSelectedPermisions(item) {
        this.setSelectedPermisions(item.checked, item.id, item.checked, item.checkedwrite);
        if (item.permissions && item.permissions.length) {
            item.permissions.forEach((page) => {
                var _a;
                this.setSelectedPermisions(page.checked, page.id, page.checked, page.checkedwrite);
                if (page && ((_a = page.permissions) === null || _a === void 0 ? void 0 : _a.length)) {
                    page.permissions.forEach((privilege) => {
                        this.setSelectedPermisions(privilege.checked, privilege.id, privilege.checked, privilege.checkedwrite);
                    });
                }
            });
        }
    }
    selectAllPrivilage(pageIndex, permissionIndex, event) {
        event.stopPropagation();
        this.permissions[pageIndex].checked = event.target.checked;
        if (event.target.value === 'read' || event.target.value === 'on') {
            this.permissions[pageIndex].permissions[permissionIndex].checked = event.target.checked;
        }
        if (event.target.value === 'write') {
            this.permissions[pageIndex].permissions[permissionIndex].checkedwrite = event.target.checked;
        }
        this.setSelectedPermisions(event.target.checked, this.permissions[pageIndex].permissions[permissionIndex].id, this.permissions[pageIndex].permissions[permissionIndex].checked, this.permissions[pageIndex].permissions[permissionIndex].checkedwrite);
        if (event.target.value === 'read' || event.target.value === 'on') {
            if (event.target.checked || !event.target.checked) {
                this.permissions[pageIndex].permissions[permissionIndex].permissions.forEach((page) => {
                    page.checked = event.target.checked;
                    this.setSelectedPermisions(event.target.checked, page.id, page.checked, page.checkedwrite);
                });
            }
        }
        else if (event.target.value === 'write') {
            if (event.target.checked) {
                this.permissions[pageIndex].permissions[permissionIndex].permissions.forEach((page) => {
                    page.checkedwrite = event.target.checked;
                    this.setSelectedPermisions(event.target.checked, page.id, page.checked, page.checkedwrite);
                });
            }
        }
        this.getPageChecked(pageIndex);
    }
    selectPage(pageIndex, permissionIndex, event) {
        event.stopPropagation();
        if (event.target.value === 'write') {
            this.permissions[pageIndex].permissions[permissionIndex].checkedwrite = event.target.checked;
        }
        if (event.target.value === 'read') {
            this.permissions[pageIndex].permissions[permissionIndex].checked = event.target.checked;
        }
        this.setSelectedPermisions(event.target.checked, this.permissions[pageIndex].permissions[permissionIndex].id, this.permissions[pageIndex].permissions[permissionIndex].checked, this.permissions[pageIndex].permissions[permissionIndex].checkedwrite);
        this.getPageChecked(pageIndex);
    }
    selectPrivilege(pageIndex, permissionIndex, privilegeIndex, event) {
        event.stopPropagation();
        if (event.target.value === 'write') {
            this.permissions[pageIndex].permissions[permissionIndex].permissions[privilegeIndex].checkedwrite =
                event.target.checked;
        }
        if (event.target.value === 'read' || event.target.value === 'on') {
            this.permissions[pageIndex].permissions[permissionIndex].permissions[privilegeIndex].checked =
                event.target.checked;
        }
        this.setSelectedPermisions(event.target.checked, this.permissions[pageIndex].permissions[permissionIndex].permissions[privilegeIndex].id, this.permissions[pageIndex].permissions[permissionIndex].permissions[privilegeIndex].checked, this.permissions[pageIndex].permissions[permissionIndex].permissions[privilegeIndex].checkedwrite);
        this.getPrivilageChecked(pageIndex, permissionIndex);
        this.getPageChecked(pageIndex);
    }
    getPageChecked(pageIndex) {
        if (this.permissions[pageIndex].checked !== this.getChecked(this.permissions[pageIndex].permissions) &&
            this.permissions[pageIndex].checkedwrite !== this.getCheckedWrite(this.permissions[pageIndex].permissions)) {
            this.permissions[pageIndex].checked = this.getChecked(this.permissions[pageIndex].permissions);
            this.setSelectedPermisions(this.permissions[pageIndex].checked, this.permissions[pageIndex].id, this.permissions[pageIndex].checked, this.permissions[pageIndex].checkedwrite);
        }
    }
    getPrivilageChecked(pageIndex, permissionIndex) {
        if (this.permissions[pageIndex].permissions[permissionIndex].checked !==
            this.getChecked(this.permissions[pageIndex].permissions[permissionIndex].permissions)) {
            this.permissions[pageIndex].permissions[permissionIndex].checked = this.getChecked(this.permissions[pageIndex].permissions[permissionIndex].permissions);
            this.setSelectedPermisions(this.permissions[pageIndex].permissions[permissionIndex].checked, this.permissions[pageIndex].permissions[permissionIndex].id, this.permissions[pageIndex].permissions[permissionIndex].checked, this.permissions[pageIndex].permissions[permissionIndex].checkedwrite);
        }
        else if (this.permissions[pageIndex].permissions[permissionIndex].checkedwrite !==
            this.getCheckedWrite(this.permissions[pageIndex].permissions[permissionIndex].permissions)) {
            this.permissions[pageIndex].permissions[permissionIndex].checkedwrite = this.getCheckedWrite(this.permissions[pageIndex].permissions[permissionIndex].permissions);
            this.setSelectedPermisions(this.permissions[pageIndex].permissions[permissionIndex].checked, this.permissions[pageIndex].permissions[permissionIndex].id, this.permissions[pageIndex].permissions[permissionIndex].checked, this.permissions[pageIndex].permissions[permissionIndex].checkedwrite);
        }
    }
    selectAllAccess(value) {
        this.permissions.forEach((page) => {
            page.checked = value;
            this.setSelectedPermisions(value, page.id, page.checked, page.checkedwrite);
            if (page && page.permissions) {
                page.permissions.forEach((permission) => {
                    var _a;
                    permission.checked = value;
                    this.setSelectedPermisions(value, permission.id, permission.checked, permission.checkedwrite);
                    if (permission && ((_a = permission.permissions) === null || _a === void 0 ? void 0 : _a.length)) {
                        permission.permissions.forEach((privilege) => {
                            privilege.checked = value;
                            privilege.checkedwrite = value;
                            this.setSelectedPermisions(value, privilege.id, privilege.checked, privilege.checkedwrite);
                        });
                    }
                });
            }
        });
    }
    addNewRole(id) {
        this.permissions = [];
        this.formSubmit = false;
        this.permissionAllow = false;
        this.rolesService.getPermissionRoleById(id).subscribe((res) => {
            this.permissionAllow = true;
            this.permissions = res['data'];
        }, (err) => console.log(err));
    }
    setSelectedPermisions(_selected, id, allow, write) {
        const index = this.selectedPermissionsGroup.findIndex(res => res.id === id);
        if (index === -1 && allow) {
            this.selectedPermissionsGroup.push({ id, allow, write });
        }
        else if (!allow && !write && index !== -1) {
            this.selectedPermissionsGroup.splice(index, 1);
        }
        else if (index !== -1) {
            this.selectedPermissionsGroup = this.selectedPermissionsGroup.map(i => {
                if (i.id === id) {
                    i.write = write;
                    i.allow = allow;
                }
                return i;
            });
        }
    }
    addRole() {
        var _a, _b;
        this.formSubmit = true;
        let data = this.roleForm.getRawValue();
        if (this.roleForm.valid) {
            const dossierConfig = (_b = (_a = this.reportDashboardList) === null || _a === void 0 ? void 0 : _a.filter((dossier) => dossier.id === data.dossierid)) === null || _b === void 0 ? void 0 : _b.map((a) => ({
                id: a.id,
                projectId: a.projectId
            }))[0];
            data.priority = this.environment.priority;
            data.applicationid = this.environment.applicationid;
            data.parentid = 2;
            data.permissions = this.selectedPermissionsGroup;
            data.dossierid = JSON.stringify(dossierConfig);
            data = Object.assign({ organizationid: this.orgId }, data);
            if (this.roleId) {
                data.id = Number(this.roleId);
                this.rolesService.updateRole(this.roleId, data).subscribe(() => {
                    this.getRoleList();
                    this.mapPolicyGroupToRole(this.roleId, data.policyGroupId);
                    this.alertService.success('Role updated successfully');
                }, (err) => this.alertService.error(err.error.message));
            }
            else {
                data.id = 0;
                data.priority = this.environment.priority;
                this.rolesService.createRole(data).subscribe((res) => {
                    this.cancel();
                    if (data.policyGroupId) {
                        this.mapPolicyGroupToRole(res['data'], data.policyGroupId, 'add');
                    }
                    this.alertService.success('Role saved successfully');
                    this.getRoleList();
                }, (err) => this.alertService.error(err.error.message));
            }
        }
    }
    mapPolicyGroupToRole(id, data, action) {
        if (action === 'add') {
            this.rolesService.createPolicyGroupForRole(id, data).subscribe(() => console.log('policy group mapped to role successfully'), (_err) => this.alertService.error(AppConstants.errorMessage));
        }
        else {
            this.rolesService.updatePolicyGroupForRole(id, data).subscribe(() => console.log('policy group mapped to role successfully'), (_err) => this.alertService.error(AppConstants.errorMessage));
        }
    }
    getReturnValue(array = [], type) {
        return type === 'id'
            ? array.map(({ id }) => id)
            : array.map(id => {
                return { id };
            });
    }
    getChecked(item) {
        return item.filter(({ checked }) => checked).length > 0;
    }
    getCheckedWrite(item) {
        return item.filter(({ checkedwrite }) => checkedwrite).length > 0;
    }
    cancel() {
        this.roleForm.reset();
        this.roleForm.enable();
        this.permissions = [];
        this.formSubmit = false;
        this.permissionAllow = false;
        this.roleId = 0;
    }
    delete(event, id) {
        event.stopPropagation();
        this.deletedId = id;
        $('#Deleteuser').modal('show');
    }
    deleteRole() {
        this.rolesService.deleteRole(this.deletedId).subscribe(() => {
            this.cancel();
            this.alertService.success('Role deleted successfully');
            $('#Deleteuser').modal('hide');
            this.getRoleList();
        }, (_err) => this.alertService.error('Failed to delete Role'));
    }
    getReportDashboard() {
        return __awaiter(this, void 0, void 0, function* () {
            this.reportDashboardList = yield this.mstrService.getLibraryDetails(this.RBACORG);
        });
    }
    // roleValidation(): any {
    //   if (!this.roleForm.value.dossierid) {
    //     this.alertService.warn('Please fill all required fields');
    //     return false;
    //   }
    //   return true;
    // }
    onModelRole(value) {
        this.modelRoleName = value.replace(/\w\S*/g, (txt) => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());
    }
    activateMenu(event) {
        if (event.item.label == 'Permissions') {
            this.firstTab = true;
        }
        else {
            this.firstTab = false;
            this.getPageInformation();
        }
    }
    getPageInformation() {
        this.permissionService.getAllPages().subscribe((res) => {
            this.menuList = res === null || res === void 0 ? void 0 : res.data;
            res.data.map((item, index) => {
                item.label = item.name;
            });
            this.nestedData();
            console.log(this.mainMenuList);
            // document.querySelector('#result').innerHTML = this.buildNavigation(this.menuList);
            // res.data.map((item, index) => {
            //   if (item.parentid == null) {
            //     let obj = {
            //       key : 1,
            //       id: item.id,
            //       parentid: item.parentid,
            //       label: item.name,
            //       data: 'Documents Folder',
            //       icon: 'pi pi-fw pi-inbox',
            //       children: []
            //     }
            //     this.mainMenuList.push(obj)
            //   }
            // });
            // this.mainMenuList.map((menu, index1) => {
            //   this.menuList.map((list, index) => {
            //     if (list?.parentid == menu?.id) {
            //       let obj = {
            //         key : 2,
            //         id: list.id,
            //         parentid: list.parentid,
            //         label: list.name,
            //         data: 'Documents Folder',
            //         icon: 'pi pi-fw pi-inbox',
            //         children: []
            //       }
            //       this.mainMenuList[index1].children.push(obj);
            //     }
            //   })
            // })
            // this.mainMenuList.map((menu, index1) => {
            //   menu.children.map((subitem, subindex) => {
            //     this.menuList.map((list, index) => {
            //       if(list.parentid == subitem.id)
            //       {
            //         let obj = {
            //             key : 3,              
            //             id: list.id,
            //             parentid: list.parentid,
            //             label: list.name,
            //             data: 'Documents Folder',
            //             icon: 'pi pi-fw pi-inbox',
            //           }
            //           subitem.children.push(obj);
            //       }
            //     })
            //   })
            // })
        });
    }
    updateMenuOrder() {
        this.mainMenuList.forEach((element, index) => {
            var _a, _b;
            let data = {
                'menuorder': index + 1,
                'id': element.rolepermissionid,
                'roleid': this.roleId
            };
            this.reArrangedList.push(data);
            if (((_a = element === null || element === void 0 ? void 0 : element.children) === null || _a === void 0 ? void 0 : _a.length) > 0) {
                (_b = element === null || element === void 0 ? void 0 : element.children) === null || _b === void 0 ? void 0 : _b.forEach((childelement, childindex) => {
                    var _a, _b;
                    let childdata = {
                        'menuorder': childindex + 1,
                        'id': childelement.rolepermissionid,
                        'roleid': this.roleId
                    };
                    this.reArrangedList.push(childdata);
                    if (((_a = childelement === null || childelement === void 0 ? void 0 : childelement.children) === null || _a === void 0 ? void 0 : _a.length) > 0) {
                        (_b = childelement === null || childelement === void 0 ? void 0 : childelement.children) === null || _b === void 0 ? void 0 : _b.forEach((childrenelement, childrenindex) => {
                            let childrendata = {
                                'menuorder': childrenindex + 1,
                                'id': childrenelement.rolepermissionid,
                                'roleid': this.roleId
                            };
                            this.reArrangedList.push(childrendata);
                        });
                    }
                });
            }
        });
        console.log('this.rearrangelist', this.reArrangedList);
        this.permissionService.updateMenuOrder({ pages: this.reArrangedList }).subscribe((res) => {
            this.alertService.success('Updated Successfully!');
            // this.Service.sendUpdate('Updated Successfully');
            // this.getPageInformation();
            window.location.reload();
        });
    }
    nodeDrop(event) {
        if (event.originalEvent.target.childNodes.length === 0) {
            if (event.dragNode.parentid == event.dropNode.parentid) {
                event.accept();
            }
            else {
                this.alertService.success('not allowed to drop');
            }
            console.log('this.mainMenuList', this.mainMenuList);
        }
        else {
            this.alertService.success('not allowed to drop');
        }
    }
}
RolesComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: RolesComponent, deps: [{ token: i0.Injector }, { token: i1.FormBuilder }, { token: i2.AlertService }, { token: i3.MicrostrategyService }, { token: i4.RbacService }, { token: i5.DataStoreService }, { token: i4.RbacService }], target: i0.ɵɵFactoryTarget.Component });
RolesComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: RolesComponent, selector: "roles", ngImport: i0, template: "<app-alert></app-alert>\r\n<div class=\"permission\">\r\n  <div class=\"row\" [formGroup]=\"roleForm\">\r\n    <div class=\"col-lg-4 col-md-6 col-12\">\r\n      <div class=\"clearfix\"></div>\r\n      <div class=\"tab-content py-2 px-2 px-sm-0\">\r\n        <div class=\"tab-pane fade show active\">\r\n          <div class=\"form-group bgiconsearch\">\r\n            <input class=\"form-control\" fieldKey=\"SETTINGS_ROL_SEARCH_BY_NAME\" placeholder=\"Search by Role name\"\r\n              type=\"text\" (keyup)=\"searchRole($event)\" />\r\n          </div>\r\n          <div class=\"clearfix\"></div>\r\n          <div class=\"useracess\">\r\n            <div class=\"d-flex align-items-center justify-content-center h-100 w-100 ng-star-inserted\"\r\n              *ngIf=\"!filteredRoleList.length\">\r\n              <p>No Record Found</p>\r\n            </div>\r\n            <ng-container *ngFor=\"let item of filteredRoleList\">\r\n              <div class=\"row userdata align-items-center\" (click)=\"getRoleInfo(item.id)\" [ngClass]=\"{ active: +item.id === roleId }\">\r\n                <div class=\"col-md-10 col-sm-10 col-10 overflow_txt\">\r\n                  <span class=\"nameuser\">{{ item.name }}</span> <br />\r\n                </div>\r\n                <div class=\"col-md-2 text-right\">\r\n                  <span class=\"right-icons\">\r\n                    <em class=\"fa fa-trash text-primary\" (click)=\"delete($event, item.id)\" aria-hidden=\"true\"\r\n                      *showField=\"'SETTINGS_ROL_DELETE'\"></em>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </ng-container>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-lg-8 col-md-6 col-12 roles-right group-role mt-2\">\r\n      <p-card class=\"rbac-card\" [style]=\"{ width: '100%', 'margin-bottom': '2em' }\">\r\n        <div class=\"strip_head toggleleft\">\r\n          <span class=\"report_head font-weight-bold\">Role Details</span>\r\n        </div>\r\n        <div class=\"p-fluid p-formgrid p-grid\">\r\n          <div class=\"p-field col-lg-4 col-md-12 col-12\">\r\n            <label for=\"rolesName\" class=\"referral-form-labels\">Role Name\r\n              <span class=\"requiredfield text-danger\">*</span>\r\n            </label>\r\n            <input id=\"rolesName\" type=\"text\" fieldKey=\"SETTINGS_ROL_ROLE_NAME\" formControlName=\"name\"\r\n              placeholder=\"Enter Role Name\" aria-describedby=\"rolesName\" [(ngModel)]=\"modelRoleName\"\r\n              (ngModelChange)=\"onModelRole($event)\" pInputText />\r\n            <div *ngIf=\"formValidate['name'].errors && formSubmit\">\r\n              <small *ngIf=\"formValidate['name'].invalid\" class=\"p-error block\">Role Name is required </small>\r\n            </div>\r\n          </div>\r\n          <div class=\"p-field col-lg-4 col-md-12 col-12\">\r\n            <label aria-labelledby=\"policyGroupList\" for=\"policyGroupList\" class=\"referral-form-labels\"\r\n              >Policy Groups\r\n              <span class=\"requiredfield text-danger\">*</span>\r\n            </label>\r\n            <p-multiSelect name=\"policyGroupList\" [options]=\"policyGroupList\" formControlName=\"policyGroupId\"\r\n              defaultLabel=\"Select Policy Groups\" optionLabel=\"policygroupname\" optionValue=\"id\"\r\n              inputId=\"policyGroupList\" ariaFilterLabel=\"null\" fieldKey=\"SETTINGS_ROL_POLICY_GROUP\" display=\"chip\">\r\n            </p-multiSelect>\r\n            <div *ngIf=\"formValidate['policyGroupId'].errors && formSubmit\">\r\n              <small *ngIf=\"formValidate['policyGroupId'].invalid\" class=\"p-error block\">Policy Group is required </small>\r\n            </div>\r\n          </div>\r\n          <div class=\"p-field col-lg-4 col-md-12 col-12\">\r\n            <label aria-labelledby=\"landingPage\" for=\"landingPage\" class=\"referral-form-labels\">Landing Page\r\n              <span class=\"requiredfield text-danger\">*</span>\r\n            </label>\r\n            <p-dropdown name=\"landingPage\" [options]=\"landingPage\" [filter]=\"true\" [editable]=\"true\" formControlName=\"defaultpageid\"\r\n              defaultLabel=\"Select Landing Page\" fieldKey=\"SETTINGS_ROL_LANDING_PAGE\" optionLabel=\"name\"\r\n              optionValue=\"id\" inputId=\"landingPage\">\r\n            </p-dropdown>\r\n            <div *ngIf=\"formValidate['defaultpageid'].errors && formSubmit\">\r\n              <small *ngIf=\"formValidate['defaultpageid'].invalid\" class=\"p-error block\">Landing Page is required\r\n              </small>\r\n            </div>\r\n          </div>\r\n          <div class=\"p-field col-lg-4 col-md-12 col-12\">\r\n            <label aria-labelledby=\"dossierId\" for=\"dossierId\" class=\"referral-form-labels\">Report Dashboard</label>\r\n            <p-dropdown\r\n              [options]=\"reportDashboardList\"\r\n              optionLabel=\"name\"\r\n              id=\"dossierid\"\r\n              optionValue=\"id\"\r\n              placeholder=\"Select ID\"\r\n              formControlName=\"dossierid\"></p-dropdown>\r\n          </div>\r\n          <div class=\"p-field col-lg-4 col-md-12 col-12\"></div>\r\n          <div class=\"p-field col-lg-4 col-md-12 col-12\">\r\n            <!-- <button\r\n              class=\"pull-right mb-2 btn btn-primary btncommon report_button\"\r\n              fieldKey=\"SETTINGS_ROL_CONFIGURE_PERMISSION\"\r\n              (click)=\"addNewRole('1')\">\r\n              Configure Permission\r\n            </button> -->\r\n          </div>\r\n        </div>\r\n        <div class=\"mt-2\" *ngIf=\"permissionAllow\">\r\n          <button fieldKey=\"SETTINGS_ROL_RESET\" class=\"pull-right mb-2 mr-2 btn bg-white text-primary btncancel\"\r\n            (click)=\"selectAllAccess(false)\">\r\n            Reset\r\n          </button>\r\n          <button class=\"pull-right mb-2 mr-2 btn btn-primary btncommon\" fieldKey=\"SETTINGS_ROL_SELECT_ALL\"\r\n            (click)=\"selectAllAccess(true)\">\r\n            Select All\r\n          </button>\r\n          <!-- <br /> -->\r\n        </div>\r\n        <div class=\"strip_head toggleleft adjusttop\" *ngIf=\"permissionAllow\">\r\n          <!-- <span class=\"report_head font-weight-bold\">Permissions</span> -->\r\n          <p-tabMenu [model]=\"items\" [activeItem]=\"activeItem\"></p-tabMenu>\r\n        </div>\r\n\r\n        <div *ngIf=\"firstTab\">\r\n          <div class=\"clearfix\"></div>\r\n          <div class=\"mt-4 mb-4\">\r\n            <p-accordion class=\"w-100\">\r\n              <p-accordionTab class=\"w-100\" *ngFor=\"let page of permissions; let i = index\">\r\n                <ng-template pTemplate=\"header\">\r\n                  {{ page.description }}\r\n                </ng-template>\r\n                <ng-template pTemplate=\"content\">\r\n                  <div class=\"heading_analysis datamargin\">\r\n                    <div class=\"Customcheckbox pl-1\">\r\n                      <input type=\"checkbox\" class=\"styled-checkbox\" id=\"custom{{ i }}\"\r\n                        (change)=\"selectAllPage(i, $event)\" [checked]=\"page?.checked\" />\r\n                      <label for=\"custom{{ i }}\" class=\"heading_role\">{{ page.description }}</label>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <ul class=\"marginul_list ecms_rolescroll\">\r\n                    <ng-container *ngFor=\"let permission of page?.permissions; let j = index\">\r\n                      <ng-container *ngIf=\"isPrivilage(permission); else permissionOnly\">\r\n                        <li>\r\n                          <div class=\"inner_childaccess d-flex mt-0 py-1\">\r\n                            <div class=\"d-inline-flex align-items-center\">\r\n                              <label class=\"Customcheckbox pl-1 mb-0\">\r\n                                <input type=\"checkbox\" [checked]=\"permission?.checked\"\r\n                                  (change)=\"selectAllPrivilage(i, j, $event)\" id=\"description{{ j }}\" />\r\n                                <span class=\"checkmark\"></span>\r\n                              </label>\r\n                              <label for=\"description{{ j }}\" class=\"heading_role mb-0\">{{\r\n                                permission.description\r\n                                }}</label>\r\n                            </div>\r\n                          </div>\r\n                        </li>\r\n                        <li class=\"ml-1\" *ngFor=\"let privilege of permission?.permissions; let k = index\">\r\n                          <div class=\"d-flex\">\r\n                            <div class=\"custom-control custom-switch\">\r\n                              <input type=\"checkbox\" [checked]=\"privilege?.checked\" class=\"custom-control-input\"\r\n                                id=\"customSwitchesroless{{ i }}{{ j }}{{ k }}\"\r\n                                (click)=\"selectPrivilege(i, j, k, $event)\" />\r\n                              <label class=\"custom-control-label\" for=\"customSwitchesroless{{ i }}{{ j }}{{ k }}\">{{\r\n                                privilege.description\r\n                                }}</label>\r\n                            </div>\r\n                          </div>\r\n                        </li>\r\n                      </ng-container>\r\n                      <ng-template #permissionOnly>\r\n                        <li>\r\n                          <div class=\"custom-control custom-switch\">\r\n                            <input type=\"checkbox\" [checked]=\"permission?.checked\" class=\"custom-control-input\"\r\n                              (click)=\"selectPage(i, j, $event)\" id=\"customSwitchesroles{{ i }}{{ j }}\" />\r\n                            <label class=\"custom-control-label\" for=\"customSwitchesroles{{ i }}{{ j }}\">{{\r\n                              permission.description }}\r\n                            </label>\r\n                          </div>\r\n                        </li>\r\n                      </ng-template>\r\n                    </ng-container>\r\n                  </ul>\r\n                </ng-template>\r\n              </p-accordionTab>\r\n            </p-accordion>\r\n            <div class=\"col-md-12 box d-none\" *ngFor=\"let page of permissions; let i = index\">\r\n              <div class=\"heading_analysis datamargin\">\r\n                <div class=\"Customcheckbox\">\r\n                  <input type=\"checkbox\" class=\"styled-checkbox\" id=\"custom{{ i }}\" (change)=\"selectAllPage(i, $event)\"\r\n                    [checked]=\"page?.checked\" />\r\n                  <label for=\"custom{{ i }}\" class=\"heading_role\">{{ page.description }}</label>\r\n                </div>\r\n              </div>\r\n\r\n              <ul class=\"marginul_list ecms_rolescroll\">\r\n                <ng-container *ngFor=\"let permission of page?.permissions; let j = index\">\r\n                  <ng-container *ngIf=\"isPrivilage(permission); else permissionOnly\">\r\n                    <li>\r\n                      <div class=\"inner_childaccess\">\r\n                        <label class=\"Customcheckbox\">\r\n                          <input type=\"checkbox\" [checked]=\"permission?.checked\"\r\n                            (change)=\"selectAllPrivilage(i, j, $event)\" />\r\n                          <span class=\"checkmark\"></span>\r\n                        </label>\r\n                        <span class=\"heading_role\">{{ permission.description }}</span>\r\n                      </div>\r\n                    </li>\r\n                    <li *ngFor=\"let privilege of permission?.permissions; let k = index\">\r\n                      <div class=\"custom-control custom-switch\">\r\n                        <input type=\"checkbox\" [checked]=\"privilege?.checked\" class=\"custom-control-input\"\r\n                          id=\"customSwitchesroless{{ i }}{{ j }}{{ k }}\" (click)=\"selectPrivilege(i, j, k, $event)\" />\r\n                        <label class=\"custom-control-label\" for=\"customSwitchesroless{{ i }}{{ j }}{{ k }}\">{{\r\n                          privilege.description\r\n                          }}</label>\r\n                      </div>\r\n                    </li>\r\n                  </ng-container>\r\n                  <ng-template #permissionOnly>\r\n                    <li>\r\n                      <div class=\"custom-control custom-switch\">\r\n                        <input type=\"checkbox\" [checked]=\"permission?.checked\" class=\"custom-control-input\"\r\n                          (click)=\"selectPage(i, j, $event)\" id=\"customSwitchesroles{{ i }}{{ j }}\" />\r\n                        <label class=\"custom-control-label\" for=\"customSwitchesroles{{ i }}{{ j }}\">{{\r\n                          permission.description }}\r\n                        </label>\r\n                      </div>\r\n                    </li>\r\n                  </ng-template>\r\n                </ng-container>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <div class=\"mt-2\">\r\n            <button class=\"pull-right mb-2 btn btn-primary btncommon\" fieldKey=\"SETTINGS_ROL_ADD_ROLE\"\r\n              (click)=\"addRole()\">\r\n              {{ roleId ? 'Update' : 'Add' }} Role\r\n            </button>\r\n            <button class=\"pull-right mb-2 mr-2 btn bg-white text-primary btncancel\" fieldKey=\"SETTINGS_ROL_CANCEL\"\r\n              (click)=\"cancel()\">\r\n              Clear\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div *ngIf=\"!firstTab\">\r\n\r\n          <div class=\"card flex justify-content-center\">\r\n            <p-tree [value]=\"mainMenuList\" [draggableNodes]=\"true\" [droppableNodes]=\"true\" draggableScope=\"self\"\r\n              droppableScope=\"self\" class=\"w-full md:w-30rem\" selectionMode=\"single\" [(selection)]=\"selectedFile\"\r\n              [validateDrop]=\"true\" (onNodeDrop)=\"nodeDrop($event)\"></p-tree>\r\n          </div>\r\n\r\n          <div class=\"mt-2\">\r\n            <button class=\"pull-right mb-2 btn btn-primary btncommon\" fieldKey=\"SETTINGS_ROL_ADD_ROLE\"\r\n              (click)=\"updateMenuOrder()\">\r\n              Submit\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n          <br />\r\n      </p-card>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"modal\" id=\"Deleteuser\" tabindex=\"-1\" role=\"dialog\">\r\n  <div class=\"modal-dialog\" role=\"document\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\">Delete Role</h5>\r\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n          <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        Are you sure you want to delete the Role?\r\n        <div class=\"clearfix\"></div>\r\n        <div class=\"mt-2\">\r\n          <button class=\"pull-right mb-2 btn btn-primary btncommon delete\" data-dismiss=\"modal\" (click)=\"deleteRole()\">\r\n            Delete\r\n          </button>\r\n          <button class=\"pull-right mb-2 mr-2 btn bg-white text-primary btncancel\" data-dismiss=\"modal\">Cancel</button>\r\n        </div>\r\n        <div class=\"clearfix\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>", styles: [".head-div{padding-top:9px;padding-left:7px}.bgiconsearch{margin-bottom:5px;padding-bottom:0;font-size:var(--font-13)}.useracess{border-radius:2px;padding:5px 0;max-height:calc(100vh - 227px);overflow-y:auto}.userempty{max-width:none;border-radius:50%;height:35px;width:35px}.row.userdata{margin:0;border-bottom:solid 1px var(--table-border);padding:5px 0;cursor:pointer}.overflow_txt{overflow:hidden;text-overflow:ellipsis}span.nameuser{font-size:var(--font-13);color:var(--label-text);font-weight:600}.userid,span.emailuser{font-size:var(--font-13);color:#838383}.heading_analysis{padding-bottom:0;border-bottom:1px solid var(--table-border)}.Customcheckbox{position:relative;padding-top:0;padding-left:10px}.heading_role{padding-left:10px;font-size:var(--font-13);top:-2px;position:relative;font-weight:700}.marginul_list{padding:0;margin:0}.marginul_list li{list-style:none;padding-top:5px}.marginul_list li label{color:var(--text-dark);text-transform:capitalize;font-size:var(--font-13)}.marginul_list.ecms_rolescroll{max-height:250px;overflow:auto;margin-bottom:20px}.ecms_rolescroll::-webkit-scrollbar{width:.5em;height:.5em}.ecms_rolescroll::-webkit-scrollbar-track{box-shadow:inset 0 0 6px #0000004d;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3)}.ecms_rolescroll::-webkit-scrollbar-thumb{background-color:#a9a9a9;outline:1px solid slategrey}.inner_childaccess{margin-top:9px;margin-left:3px;border-bottom:1px solid var(--table-border)}.inner_childaccess .heading_role{font-size:var(--font-13);font-weight:700}.Customcheckbox input{display:inline-block}.Customcheckbox:hover input~.checkmark{border:solid 2px #2196f3}.Customcheckbox input~.checkmark{display:none}.Customcheckbox input:checked~.checkmark{display:none;border:solid 2px #1db766;background-color:#1db766}.Customcheckbox input:checked~.checkmark:after{display:block}.Customcheckbox .checkmark:after{left:6px;top:2px;width:5px;height:10px;border:solid #ffffff;border-width:0 2px 2px 0;transform:rotate(45deg)}.custom-control-input:checked~.custom-control-label:before{color:#fff;border:#1db766!important;background:#1db766!important}.custom-control.custom-switch.toggleleft .custom-control-label{padding-top:3px;font-size:var(--font-13)}.custom-switch .custom-control-label:after{top:calc(.25rem + 3px)}.toggle .custom-control-input:checked~.custom-control-label:before{color:#fff;border:#1db766!important;background:#1db766!important}.toggle .custom-control-input~.custom-control-label:before{color:#fff;border:#8c8c8c;background:#8c8c8c}.toggle .custom-control-label:after{background-color:#fff}.custom-switch .custom-control-label:before{left:-2.25rem;width:1.75rem;pointer-events:all;border-radius:.5rem}.custom-control-label:before{position:absolute;top:.25rem;left:-1.5rem;display:block;width:1rem;height:18px;pointer-events:none;content:\"\";background-color:#fff;border:1px solid #adb5bd}.custom-control-input{position:absolute;z-index:-1;opacity:0}.custom-control-label{position:relative;margin-bottom:0;vertical-align:top}.custom-control input[type=checkbox]+label:before{content:\"\"}.custom-switch{padding-left:3.25rem}.toggleleft{font-size:var(--font-13);font-weight:600;display:block;margin-top:-12px;padding-bottom:13px}.report_button{margin-top:27px}.head-div .heading{font-weight:600}.right-icons .fa{margin-top:3px;display:inline-block;z-index:9}.right-icons .fa-trash{font-size:18px}:host ::ng-deep .p-accordion .p-accordion-tab .p-accordion-header .p-accordion-header-link{background:var(--bg-light);color:var(--text-dark);border-color:var(--table-border)}:host ::ng-deep .p-accordion .p-accordion-tab .p-accordion-header:not(.p-highlight):not(.p-disabled):hover .p-accordion-header-link{background:var(--primary);color:var(--hover-text);border-color:var(--table-border)}:host ::ng-deep .p-accordion .p-accordion-tab .p-accordion-content{background:var(--bg-light);color:var(--text-dark);border-color:var(--table-border)}:host ::ng-deep .p-accordion .p-accordion-header:not(.p-disabled).p-highlight:hover .p-accordion-header-link{background:var(--primary);color:var(--hover-text);border-color:var(--table-border)}.adjusttop{margin-top:60px;margin-bottom:-24px}\n"], components: [{ type: i6.AlertComponent, selector: "app-alert" }, { type: i7.Card, selector: "p-card", inputs: ["header", "subheader", "style", "styleClass"] }, { type: i8.MultiSelect, selector: "p-multiSelect", inputs: ["style", "styleClass", "panelStyle", "panelStyleClass", "inputId", "disabled", "readonly", "group", "filter", "filterPlaceHolder", "filterLocale", "overlayVisible", "tabindex", "appendTo", "dataKey", "name", "label", "ariaLabelledBy", "displaySelectedLabel", "maxSelectedLabels", "selectionLimit", "selectedItemsLabel", "showToggleAll", "emptyFilterMessage", "emptyMessage", "resetFilterOnHide", "dropdownIcon", "optionLabel", "optionValue", "optionDisabled", "optionGroupLabel", "optionGroupChildren", "showHeader", "autoZIndex", "baseZIndex", "filterBy", "virtualScroll", "itemSize", "showTransitionOptions", "hideTransitionOptions", "ariaFilterLabel", "filterMatchMode", "tooltip", "tooltipPosition", "tooltipPositionStyle", "tooltipStyleClass", "autofocusFilter", "display", "autocomplete", "showClear", "scrollHeight", "defaultLabel", "placeholder", "options", "filterValue"], outputs: ["onChange", "onFilter", "onFocus", "onBlur", "onClick", "onClear", "onPanelShow", "onPanelHide"] }, { type: i9.Dropdown, selector: "p-dropdown", inputs: ["scrollHeight", "filter", "name", "style", "panelStyle", "styleClass", "panelStyleClass", "readonly", "required", "editable", "appendTo", "tabindex", "placeholder", "filterPlaceholder", "filterLocale", "inputId", "selectId", "dataKey", "filterBy", "autofocus", "resetFilterOnHide", "dropdownIcon", "optionLabel", "optionValue", "optionDisabled", "optionGroupLabel", "optionGroupChildren", "autoDisplayFirst", "group", "showClear", "emptyFilterMessage", "emptyMessage", "virtualScroll", "itemSize", "autoZIndex", "baseZIndex", "showTransitionOptions", "hideTransitionOptions", "ariaFilterLabel", "ariaLabel", "ariaLabelledBy", "filterMatchMode", "maxlength", "tooltip", "tooltipPosition", "tooltipPositionStyle", "tooltipStyleClass", "autofocusFilter", "disabled", "options", "filterValue"], outputs: ["onChange", "onFilter", "onFocus", "onBlur", "onClick", "onShow", "onHide", "onClear"] }, { type: i10.TabMenu, selector: "p-tabMenu", inputs: ["model", "activeItem", "scrollable", "popup", "style", "styleClass"] }, { type: i11.Accordion, selector: "p-accordion", inputs: ["multiple", "style", "styleClass", "expandIcon", "collapseIcon", "activeIndex"], outputs: ["onClose", "onOpen", "activeIndexChange"] }, { type: i11.AccordionTab, selector: "p-accordionTab", inputs: ["header", "disabled", "cache", "transitionOptions", "selected"], outputs: ["selectedChange"] }, { type: i12.Tree, selector: "p-tree", inputs: ["value", "selectionMode", "selection", "style", "styleClass", "contextMenu", "layout", "draggableScope", "droppableScope", "draggableNodes", "droppableNodes", "metaKeySelection", "propagateSelectionUp", "propagateSelectionDown", "loading", "loadingIcon", "emptyMessage", "ariaLabel", "togglerAriaLabel", "ariaLabelledBy", "validateDrop", "filter", "filterBy", "filterMode", "filterPlaceholder", "filteredNodes", "filterLocale", "scrollHeight", "virtualScroll", "virtualNodeHeight", "minBufferPx", "maxBufferPx", "indentation", "trackBy"], outputs: ["selectionChange", "onNodeSelect", "onNodeUnselect", "onNodeExpand", "onNodeCollapse", "onNodeContextMenuSelect", "onNodeDrop", "onFilter"] }], directives: [{ type: i1.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i1.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i13.PermissionDirective, selector: "[fieldKey]", inputs: ["fieldKey"] }, { type: i14.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i14.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i14.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i15.ShowFieldDirective, selector: "[showField]", inputs: ["showField"] }, { type: i1.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i1.FormControlName, selector: "[formControlName]", inputs: ["disabled", "formControlName", "ngModel"], outputs: ["ngModelChange"] }, { type: i16.InputText, selector: "[pInputText]" }, { type: i17.PrimeTemplate, selector: "[pTemplate]", inputs: ["type", "pTemplate"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: RolesComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'roles',
                    templateUrl: './roles.component.html',
                    styleUrls: ['./roles.component.scss']
                }]
        }], ctorParameters: function () { return [{ type: i0.Injector }, { type: i1.FormBuilder }, { type: i2.AlertService }, { type: i3.MicrostrategyService }, { type: i4.RbacService }, { type: i5.DataStoreService }, { type: i4.RbacService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm9sZXMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvcGljcy1jb3JlL3JiYWMtcm9sZXMvc3JjL2xpYi9waWNzLXJiYWMtcm9sZXMvcm9sZXMvcm9sZXMuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvcGljcy1jb3JlL3JiYWMtcm9sZXMvc3JjL2xpYi9waWNzLXJiYWMtcm9sZXMvcm9sZXMvcm9sZXMuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQW9CLE1BQU0sZUFBZSxDQUFDO0FBQzVELE9BQU8sRUFBMEIsVUFBVSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFcEUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBRWhFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWF6RCxNQUFNLE9BQU8sY0FBYztJQStDekIsWUFDRSxRQUFrQixFQUNWLFdBQXdCLEVBQ3hCLFlBQTBCLEVBQzFCLFdBQWlDLEVBQ2pDLFlBQXlCLEVBQ3pCLGFBQStCLEVBQy9CLGlCQUE4QjtRQUw5QixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUN4QixpQkFBWSxHQUFaLFlBQVksQ0FBYztRQUMxQixnQkFBVyxHQUFYLFdBQVcsQ0FBc0I7UUFDakMsaUJBQVksR0FBWixZQUFZLENBQWE7UUFDekIsa0JBQWEsR0FBYixhQUFhLENBQWtCO1FBQy9CLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBYTtRQXBEeEMsYUFBUSxHQUFnQixFQUFFLENBQUM7UUFDM0IscUJBQWdCLEdBQWdCLEVBQUUsQ0FBQztRQUVuQyw2QkFBd0IsR0FBcUQsRUFBRSxDQUFDO1FBQ2hGLGNBQVMsR0FBa0IsRUFBRSxDQUFDO1FBRzlCLGtCQUFhLEdBQVcsRUFB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c0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbmplY3RvciwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEZvcm1CdWlsZGVyLCBGb3JtR3JvdXAsIFZhbGlkYXRvcnMgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBBcHBDb25zdGFudHMgfSBmcm9tICcuLi9AY29yZS9jb25zdGFudHMvYXBwLWNvbnN0YW50cyc7XHJcbmltcG9ydCB7IEFsZXJ0U2VydmljZSB9IGZyb20gJy4uL0Bjb3JlL3NlcnZpY2UvYWxlcnQuc2VydmljZSc7XHJcbmltcG9ydCB7IFJCQUNJTkZPIH0gZnJvbSAnLi4vQGNvcmUvdXJscy9yYmFjLXVybC5jb25maWcnO1xyXG5pbXBvcnQgeyBMYW5kaW5nUGFnZU1vZGVsLCBSb2xlTW9kZWwsIFVzZXJSb2xlRHRvIH0gZnJvbSAnLi4vQGNvcmUvZGF0YW1vZGVsL3JiYWNEYXRhTW9kZWwnO1xyXG5pbXBvcnQgeyBEYXRhU3RvcmVTZXJ2aWNlIH0gZnJvbSAnLi4vQGNvcmUvc2VydmljZS9kYXRhLXN0b3JlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBNaWNyb3N0cmF0ZWd5U2VydmljZSB9IGZyb20gJy4uL0Bjb3JlL3NlcnZpY2UvbWljcm9zdHJhdGVneS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUmJhY1NlcnZpY2UgfSBmcm9tICcuLi9AY29yZS9zZXJ2aWNlL3JiYWMuc2VydmljZSc7XHJcbmltcG9ydCB7IFRyZWVOb2RlIH0gZnJvbSAncHJpbWVuZy9hcGkvdHJlZW5vZGUnO1xyXG5pbXBvcnQgeyBNZW51SXRlbSB9IGZyb20gJ3ByaW1lbmcvYXBpL21lbnVpdGVtJztcclxuZGVjbGFyZSBjb25zdCAkOiBhbnk7XHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAncm9sZXMnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9yb2xlcy5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vcm9sZXMuY29tcG9uZW50LnNjc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgUm9sZXNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIHJvbGVJZCE6IG51bWJlcjtcclxuICByb2xlTGlzdDogUm9sZU1vZGVsW10gPSBbXTtcclxuICBmaWx0ZXJlZFJvbGVMaXN0OiBSb2xlTW9kZWxbXSA9IFtdO1xyXG4gIGlzRGlzYWJsZWQhOiBib29sZWFuO1xyXG4gIHNlbGVjdGVkUGVybWlzc2lvbnNHcm91cDogeyBpZDogbnVtYmVyOyBhbGxvdzogYm9vbGVhbjsgd3JpdGU6IGJvb2xlYW4gfVtdID0gW107XHJcbiAgdXNlcnJvbGVzOiBVc2VyUm9sZUR0b1tdID0gW107XHJcbiAgaXNEaXNhYmxlZE90aGVyITogYm9vbGVhbjtcclxuICBkZWxldGVkSWQhOiBzdHJpbmc7XHJcbiAgbW9kZWxSb2xlTmFtZTogc3RyaW5nID0gJyc7XHJcbiAgcm9sZUZvcm0hOiBGb3JtR3JvdXA7XHJcbiAgZm9ybVN1Ym1pdCE6IGJvb2xlYW47XHJcbiAgcGVybWlzc2lvbnM6IEFycmF5PGFueT4gPSBbXTtcclxuICBsYW5kaW5nUGFnZTogTGFuZGluZ1BhZ2VNb2RlbFtdID0gW107XHJcbiAgcG9saWN5R3JvdXBMaXN0OiBhbnk7XHJcbiAgcGVybWlzc2lvbkFsbG93ITogYm9vbGVhbjtcclxuICBvcmdJZDogYW55O1xyXG4gIHJlcG9ydERhc2hib2FyZExpc3Q6IGFueTtcclxuICBlbnZpcm9ubWVudDogYW55O1xyXG4gIFJCQUNPUkc6IFJCQUNJTkZPID0gbmV3IFJCQUNJTkZPKCk7XHJcbiAgb3JnU3VicyE6IFN1YnNjcmlwdGlvbjtcclxuICBpdGVtczogTWVudUl0ZW1bXSA9IFtdO1xyXG4gIGFjdGl2ZUl0ZW0hOiBNZW51SXRlbTtcclxuICBmaXJzdFRhYiE6IGJvb2xlYW47XHJcbiAgbWFpbk1lbnVMaXN0OiBhbnkgPSBbXTtcclxuICByZUFycmFuZ2VkTGlzdDogYW55ID0gW107XHJcbiAgbWVudUxpc3Q6IGFueSA9IFtdO1xyXG4gIHN1Yk1lbnVMaXN0OiBhbnkgPSBbXTtcclxuICBwYXJlbnQ6IGFueSA9IFtdO1xyXG4gIGNoaWxkTWVudUxpc3Q6IGFueSA9IFtdO1xyXG4gIHNob3dDaGlsZHJlbjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHBhcmVudE1lbnVsaXN0OiBUcmVlTm9kZVtdID0gW107XHJcbiAgc2VsZWN0ZWRGaWxlOiBUcmVlTm9kZTtcclxuICBodHRwU2VydmljZTphbnk7XHJcblxyXG4gIGJ1aWxkVHJlZSA9IChwYXJlbnRJZCkgPT4gKGl0ZW0pID0+IHtcclxuICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5tZW51TGlzdC5maWx0ZXIoKGNoaWxkKSA9PiBjaGlsZC5wYXJlbnRpZCA9PT0gaXRlbS5pZCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi5pdGVtLFxyXG4gICAgICAuLi4oY2hpbGRyZW4ubGVuZ3RoID4gMCAmJiB7IGNoaWxkcmVuOiBjaGlsZHJlbi5tYXAodGhpcy5idWlsZFRyZWUoaXRlbS5pZCkpIH0pLFxyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICBuZXN0ZWREYXRhKCkge1xyXG4gICAgdGhpcy5tYWluTWVudUxpc3QgPSB0aGlzLm1lbnVMaXN0LmZpbHRlcigoaXRlbSkgPT4gIWl0ZW0ucGFyZW50aWQpLm1hcCh0aGlzLmJ1aWxkVHJlZShudWxsKSlcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgcHJpdmF0ZSBmb3JtQnVpbGRlcjogRm9ybUJ1aWxkZXIsXHJcbiAgICBwcml2YXRlIGFsZXJ0U2VydmljZTogQWxlcnRTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBtc3RyU2VydmljZTogTWljcm9zdHJhdGVneVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHJvbGVzU2VydmljZTogUmJhY1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIF9zdG9yZXNlcnZpY2U6IERhdGFTdG9yZVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHBlcm1pc3Npb25TZXJ2aWNlOiBSYmFjU2VydmljZVxyXG4gICkge1xyXG4gICAgdGhpcy5mb3JtU3VibWl0ID0gZmFsc2U7XHJcbiAgICB0aGlzLm9yZ1N1YnMgPSAgdGhpcy5fc3RvcmVzZXJ2aWNlLmN1cnJlbnRTdG9yZS5zdWJzY3JpYmUoKHJlczogYW55KSA9PiB7XHJcbiAgICAgIGlmIChyZXNbJ1JCQUNPUkcnXSAmJiByZXNbJ1JCQUNPUkcnXSAhPT0gJycpIHtcclxuICAgICAgICB0aGlzLmZvcm1TdWJtaXQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnBlcm1pc3Npb25BbGxvdyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuUkJBQ09SRyA9IHJlc1snUkJBQ09SRyddO1xyXG4gICAgICAgIHRoaXMuZW52aXJvbm1lbnQgPSB0aGlzLlJCQUNPUkdbJ2Vudmlyb25tZW50J107XHJcbiAgICAgICAgdGhpcy5vcmdJZCA9IHBhcnNlSW50KHRoaXMuUkJBQ09SR1snb3JnSUQnXSk7XHJcbiAgICAgICAgdGhpcy5odHRwU2VydmljZSA9IHJlc1snSFRUUFNFUlZJQ0UnXVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuaXRlbXMgPSBbXHJcbiAgICAgIHtcclxuICAgICAgICBsYWJlbDogJ1Blcm1pc3Npb25zJyxcclxuICAgICAgICBpY29uOiAnJyxcclxuICAgICAgICBjb21tYW5kOiBldmVudCA9PiB7XHJcbiAgICAgICAgICB0aGlzLmFjdGl2YXRlTWVudShldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgbGFiZWw6ICdNZW51IE9yZGVyaW5nJyxcclxuICAgICAgICBpY29uOiAnJyxcclxuICAgICAgICBjb21tYW5kOiBldmVudCA9PiB7XHJcbiAgICAgICAgICB0aGlzLmFjdGl2YXRlTWVudShldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICBdO1xyXG4gICAgdGhpcy5hY3RpdmVJdGVtID0gdGhpcy5pdGVtc1swXTtcclxuICAgIHRoaXMuZmlyc3RUYWIgPSB0cnVlO1xyXG5cclxuICB9XHJcbiAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmxvZygpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplZm9ybSgpO1xyXG4gICAgdGhpcy5nZXRSZXBvcnREYXNoYm9hcmQoKTtcclxuICAgICAgdGhpcy5nZXRSb2xlTGlzdCgpO1xyXG4gICAgICB0aGlzLmdldFBvbGljeUdyb3VwTGlzdCgpO1xyXG4gICAgICB0aGlzLmdldExhbmRpbmdQYWdlKCk7XHJcbiAgICB9XHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICB0aGlzLm9yZ1N1YnMudW5zdWJzY3JpYmUoKTtcclxuICB9XHJcbiAgaW5pdGlhbGl6ZWZvcm0oKSB7XHJcbiAgICB0aGlzLnJvbGVGb3JtID0gdGhpcy5mb3JtQnVpbGRlci5ncm91cCh7XHJcbiAgICAgIG5hbWU6IFsnJywgVmFsaWRhdG9ycy5yZXF1aXJlZF0sXHJcbiAgICAgIGRlZmF1bHRwYWdlaWQ6IFsnJywgVmFsaWRhdG9ycy5yZXF1aXJlZF0sXHJcbiAgICAgIHBhcmVudGlkOiBbMl0sXHJcbiAgICAgIHBvbGljeUdyb3VwSWQ6IFsnJywgVmFsaWRhdG9ycy5yZXF1aXJlZF0sXHJcbiAgICAgIGRvc3NpZXJpZDogWycnXVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXQgZm9ybVZhbGlkYXRlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucm9sZUZvcm0uY29udHJvbHM7XHJcbiAgfVxyXG5cclxuICBnZXRMYW5kaW5nUGFnZSgpIHtcclxuICAgIHRoaXMucm9sZXNTZXJ2aWNlLmdldExhbmRpbmdQYWdlKCcxJykuc3Vic2NyaWJlKFxyXG4gICAgICAocmVzOiBhbnkpID0+IHtcclxuICAgICAgICBpZiAocmVzKSB7XHJcbiAgICAgICAgICB0aGlzLmxhbmRpbmdQYWdlID0gcmVzWydkYXRhJ10uZmlsdGVyKCh4OiBhbnkpID0+IHgucm91dGUuY2hhckF0KDApID09PSAnLycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgKGVycm9yOiBhbnkpID0+IGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGdldFJvbGVMaXN0KF9rZXk/OiBzdHJpbmcpIHtcclxuICAgIHRoaXMucm9sZXNTZXJ2aWNlLmdldEFsbFVzZXJSb2xlKHRoaXMub3JnSWQpLnN1YnNjcmliZShcclxuICAgICAgKHJlczogYW55KSA9PiB7XHJcbiAgICAgICAgdGhpcy5yb2xlTGlzdCA9IHJlc1snZGF0YSddLmZpbHRlcigoYTogYW55KSA9PiBhLm5hbWUgIT09ICdTdXBlciBhZG1pbicpO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyZWRSb2xlTGlzdCA9IHRoaXMucm9sZUxpc3Q7XHJcbiAgICAgIH0sXHJcbiAgICAgIChlcnI6IGFueSkgPT4gY29uc29sZS5sb2coZXJyKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGdldFBvbGljeUdyb3VwTGlzdChfbWFuYWdlbWVudEdyb3VwSWQ/OiBudW1iZXIpIHtcclxuICAgIHRoaXMucm9sZXNTZXJ2aWNlLmdldE9yZ1BvbGljeUdyb3VwTGlzdCh0aGlzLm9yZ0lkKS5zdWJzY3JpYmUoXHJcbiAgICAgIChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgIHRoaXMucG9saWN5R3JvdXBMaXN0ID0gcmVzWydkYXRhJ107XHJcbiAgICAgIH0sXHJcbiAgICAgIChlcnI6IGFueSkgPT4gY29uc29sZS5sb2coZXJyKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHNlYXJjaFJvbGUoZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICBjb25zdCB2YWx1ZSA9IChldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUudG9Mb3dlckNhc2UoKTtcclxuICAgIHRoaXMuZmlsdGVyZWRSb2xlTGlzdCA9IHRoaXMucm9sZUxpc3QuZmlsdGVyKGEgPT4gYT8ubmFtZT8udG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHZhbHVlKSk7XHJcbiAgfVxyXG5cclxuICBnZXRSb2xlSW5mbyhyb2xlaWQ6IGFueSkge1xyXG4gICAgdGhpcy5yb2xlSWQgPSByb2xlaWQ7XHJcbiAgICBpZiAocm9sZWlkKSB7XHJcbiAgICAgIHRoaXMuaXNEaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIHRoaXMucm9sZXNTZXJ2aWNlLmdldFJvbGVCeUlkKHJvbGVpZCkuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbkFsbG93ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJvbGVJbmZvcm1hdGlvbihyZXMpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucm9sZUZvcm0ucmVzZXQoKTtcclxuICAgICAgdGhpcy5wZXJtaXNzaW9ucyA9IFtdO1xyXG4gICAgICB0aGlzLmlzRGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5pc0Rpc2FibGVkT3RoZXIgPSBmYWxzZTtcclxuICAgICAgdGhpcy5yb2xlRm9ybS5lbmFibGUoKTtcclxuICAgIH1cclxuICB9XHJcbiAgcm9sZUluZm9ybWF0aW9uKHJlczogYW55KSB7XHJcbiAgICB0aGlzLnJvbGVGb3JtLnBhdGNoVmFsdWUoe1xyXG4gICAgICBuYW1lOiByZXMuZGF0YS5uYW1lLFxyXG4gICAgICBkZWZhdWx0cGFnZWlkOiByZXMuZGF0YS5kZWZhdWx0cGFnZWlkLFxyXG4gICAgICBwYXJlbnRpZDogcmVzLmRhdGEucGFyZW50aWQsXHJcbiAgICAgIHBvbGljeUdyb3VwSWQ6XHJcbiAgICAgICAgcmVzPy5kYXRhPy5wb2xpY3lHcm91cHNcclxuICAgICAgICAgIC5maWx0ZXIoKGl0ZW06IGFueSkgPT4gaXRlbSlcclxuICAgICAgICAgIC5tYXAoKGl0ZW06IGFueSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbVsnaWQnXTtcclxuICAgICAgICAgIH0pIHx8IFtdLFxyXG4gICAgICBkb3NzaWVyaWQ6IEpTT04ucGFyc2UocmVzLmRhdGEuZG9zc2llcmlkKT8uaWRcclxuICAgIH0pO1xyXG4gICAgdGhpcy5wZXJtaXNzaW9ucyA9IFsuLi5yZXM/LmRhdGE/LnBlcm1pc3Npb25zXTtcclxuICAgIHRoaXMucGVybWlzc2lvbnMgPSB0aGlzLnBlcm1pc3Npb25zXHJcbiAgICAgIC5tYXAoZiA9PiB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oeyBpc0Zvcm1CdWlsZGVyOiBmYWxzZSB9LCBmKTtcclxuICAgICAgfSlcclxuICAgICAgLm1hcChnID0+IHtcclxuICAgICAgICBpZiAoZy5rZXkgPT09ICdGT1JNJykge1xyXG4gICAgICAgICAgZy5pc0Zvcm1CdWlsZGVyID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZy5pc0Zvcm1CdWlsZGVyID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBnO1xyXG4gICAgICB9KTtcclxuICAgIHRoaXMuc2VsZWN0ZWRQZXJtaXNzaW9uc0dyb3VwID0gW107XHJcbiAgICBpZiAocmVzLmRhdGEucGVybWlzc2lvbnMgJiYgcmVzLmRhdGEucGVybWlzc2lvbnMubGVuZ3RoKSB7XHJcbiAgICAgIHJlcy5kYXRhLnBlcm1pc3Npb25zLmZvckVhY2goKGVsZTogYW55KSA9PiB7XHJcbiAgICAgICAgdGhpcy5nZXRTZWxlY3RlZFBlcm1pc2lvbnMoZWxlKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmlzRGlzYWJsZWRPdGhlciA9ICF0aGlzLmhhc0FjY2VzcztcclxuICAgIGNvbnN0IGlzQWRtaW4gPSB0aGlzLnVzZXJyb2xlcy5maW5kKCh7IG5hbWUgfSkgPT4gbmFtZSA9PT0gJ0FkbWluJyk7XHJcbiAgICBpZiAoaXNBZG1pbikge1xyXG4gICAgICB0aGlzLnJvbGVGb3JtLmVuYWJsZSgpO1xyXG4gICAgICB0aGlzLmlzRGlzYWJsZWRPdGhlciA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmICghdGhpcy5oYXNBY2Nlc3MgfHwgcmVzLmlzcmVhZG9ubHkpIHtcclxuICAgICAgdGhpcy5yb2xlRm9ybS5jb250cm9sc1snbmFtZSddLmRpc2FibGUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucm9sZUZvcm0uZW5hYmxlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCBoYXNBY2Nlc3MoKSB7XHJcbiAgICByZXR1cm4gdGhpcy51c2Vycm9sZXMuZmluZCgoeyBpZCwgbmFtZSB9KSA9PiBpZCA9PT0gdGhpcy5yb2xlSWQgfHwgbmFtZSA9PT0gJ0FkbWluJyk7XHJcbiAgfVxyXG5cclxuICBpc1ByaXZpbGFnZShwZXJtaXNzaW9uOiBhbnkpIHtcclxuICAgIGlmIChwZXJtaXNzaW9uICYmIHBlcm1pc3Npb24/LnBlcm1pc3Npb25zICYmIHBlcm1pc3Npb24/LnBlcm1pc3Npb25zPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2VsZWN0QWxsUGFnZShpbmRleDogbnVtYmVyLCBldmVudDogYW55KSB7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMucGVybWlzc2lvbnNbaW5kZXhdLmNoZWNrZWQgPSBldmVudC50YXJnZXQuY2hlY2tlZDtcclxuICAgIHRoaXMuc2V0U2VsZWN0ZWRQZXJtaXNpb25zKFxyXG4gICAgICBldmVudC50YXJnZXQuY2hlY2tlZCxcclxuICAgICAgdGhpcy5wZXJtaXNzaW9uc1tpbmRleF0uaWQsXHJcbiAgICAgIHRoaXMucGVybWlzc2lvbnNbaW5kZXhdLmNoZWNrZWQsXHJcbiAgICAgIHRoaXMucGVybWlzc2lvbnNbaW5kZXhdLmNoZWNrZWR3cml0ZVxyXG4gICAgKTtcclxuICAgIHRoaXMucGVybWlzc2lvbnNbaW5kZXhdLnBlcm1pc3Npb25zLmZvckVhY2goKHBhZ2U6IGFueSkgPT4ge1xyXG4gICAgICBwYWdlLmNoZWNrZWQgPSBldmVudC50YXJnZXQuY2hlY2tlZDtcclxuICAgICAgcGFnZS5jaGVja2Vkd3JpdGUgPSBldmVudC50YXJnZXQuY2hlY2tlZDtcclxuICAgICAgdGhpcy5zZXRTZWxlY3RlZFBlcm1pc2lvbnMoZXZlbnQudGFyZ2V0LmNoZWNrZWQsIHBhZ2UuaWQsIHBhZ2UuY2hlY2tlZCwgcGFnZS5jaGVja2Vkd3JpdGUpO1xyXG4gICAgICBwYWdlLnBlcm1pc3Npb25zLmZvckVhY2goKHByaXZpbGVnZTogYW55KSA9PiB7XHJcbiAgICAgICAgcHJpdmlsZWdlLmNoZWNrZWQgPSBldmVudC50YXJnZXQuY2hlY2tlZDtcclxuICAgICAgICBwcml2aWxlZ2UuY2hlY2tlZHdyaXRlID0gZXZlbnQudGFyZ2V0LmNoZWNrZWQ7XHJcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZFBlcm1pc2lvbnMoZXZlbnQudGFyZ2V0LmNoZWNrZWQsIHByaXZpbGVnZS5pZCwgcHJpdmlsZWdlLmNoZWNrZWQsIHByaXZpbGVnZS5jaGVja2Vkd3JpdGUpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2VsZWN0ZWRQZXJtaXNpb25zKGl0ZW06IGFueSkge1xyXG4gICAgdGhpcy5zZXRTZWxlY3RlZFBlcm1pc2lvbnMoaXRlbS5jaGVja2VkLCBpdGVtLmlkLCBpdGVtLmNoZWNrZWQsIGl0ZW0uY2hlY2tlZHdyaXRlKTtcclxuICAgIGlmIChpdGVtLnBlcm1pc3Npb25zICYmIGl0ZW0ucGVybWlzc2lvbnMubGVuZ3RoKSB7XHJcbiAgICAgIGl0ZW0ucGVybWlzc2lvbnMuZm9yRWFjaCgocGFnZTogYW55KSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZFBlcm1pc2lvbnMocGFnZS5jaGVja2VkLCBwYWdlLmlkLCBwYWdlLmNoZWNrZWQsIHBhZ2UuY2hlY2tlZHdyaXRlKTtcclxuICAgICAgICBpZiAocGFnZSAmJiBwYWdlLnBlcm1pc3Npb25zPy5sZW5ndGgpIHtcclxuICAgICAgICAgIHBhZ2UucGVybWlzc2lvbnMuZm9yRWFjaCgocHJpdmlsZWdlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZFBlcm1pc2lvbnMocHJpdmlsZWdlLmNoZWNrZWQsIHByaXZpbGVnZS5pZCwgcHJpdmlsZWdlLmNoZWNrZWQsIHByaXZpbGVnZS5jaGVja2Vkd3JpdGUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNlbGVjdEFsbFByaXZpbGFnZShwYWdlSW5kZXg6IG51bWJlciwgcGVybWlzc2lvbkluZGV4OiBudW1iZXIsIGV2ZW50OiBhbnkpIHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5wZXJtaXNzaW9uc1twYWdlSW5kZXhdLmNoZWNrZWQgPSBldmVudC50YXJnZXQuY2hlY2tlZDtcclxuICAgIGlmIChldmVudC50YXJnZXQudmFsdWUgPT09ICdyZWFkJyB8fCBldmVudC50YXJnZXQudmFsdWUgPT09ICdvbicpIHtcclxuICAgICAgdGhpcy5wZXJtaXNzaW9uc1twYWdlSW5kZXhdLnBlcm1pc3Npb25zW3Blcm1pc3Npb25JbmRleF0uY2hlY2tlZCA9IGV2ZW50LnRhcmdldC5jaGVja2VkO1xyXG4gICAgfVxyXG4gICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PT0gJ3dyaXRlJykge1xyXG4gICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0ucGVybWlzc2lvbnNbcGVybWlzc2lvbkluZGV4XS5jaGVja2Vkd3JpdGUgPSBldmVudC50YXJnZXQuY2hlY2tlZDtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U2VsZWN0ZWRQZXJtaXNpb25zKFxyXG4gICAgICBldmVudC50YXJnZXQuY2hlY2tlZCxcclxuICAgICAgdGhpcy5wZXJtaXNzaW9uc1twYWdlSW5kZXhdLnBlcm1pc3Npb25zW3Blcm1pc3Npb25JbmRleF0uaWQsXHJcbiAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9uc1twZXJtaXNzaW9uSW5kZXhdLmNoZWNrZWQsXHJcbiAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9uc1twZXJtaXNzaW9uSW5kZXhdLmNoZWNrZWR3cml0ZVxyXG4gICAgKTtcclxuICAgIGlmIChldmVudC50YXJnZXQudmFsdWUgPT09ICdyZWFkJyB8fCBldmVudC50YXJnZXQudmFsdWUgPT09ICdvbicpIHtcclxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkIHx8ICFldmVudC50YXJnZXQuY2hlY2tlZCkge1xyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9uc1twZXJtaXNzaW9uSW5kZXhdLnBlcm1pc3Npb25zLmZvckVhY2goKHBhZ2U6IGFueSkgPT4ge1xyXG4gICAgICAgICAgcGFnZS5jaGVja2VkID0gZXZlbnQudGFyZ2V0LmNoZWNrZWQ7XHJcbiAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkUGVybWlzaW9ucyhldmVudC50YXJnZXQuY2hlY2tlZCwgcGFnZS5pZCwgcGFnZS5jaGVja2VkLCBwYWdlLmNoZWNrZWR3cml0ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID09PSAnd3JpdGUnKSB7XHJcbiAgICAgIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCkge1xyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9uc1twZXJtaXNzaW9uSW5kZXhdLnBlcm1pc3Npb25zLmZvckVhY2goKHBhZ2U6IGFueSkgPT4ge1xyXG4gICAgICAgICAgcGFnZS5jaGVja2Vkd3JpdGUgPSBldmVudC50YXJnZXQuY2hlY2tlZDtcclxuICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRQZXJtaXNpb25zKGV2ZW50LnRhcmdldC5jaGVja2VkLCBwYWdlLmlkLCBwYWdlLmNoZWNrZWQsIHBhZ2UuY2hlY2tlZHdyaXRlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5nZXRQYWdlQ2hlY2tlZChwYWdlSW5kZXgpO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0UGFnZShwYWdlSW5kZXg6IG51bWJlciwgcGVybWlzc2lvbkluZGV4OiBudW1iZXIsIGV2ZW50OiBhbnkpIHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PT0gJ3dyaXRlJykge1xyXG4gICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0ucGVybWlzc2lvbnNbcGVybWlzc2lvbkluZGV4XS5jaGVja2Vkd3JpdGUgPSBldmVudC50YXJnZXQuY2hlY2tlZDtcclxuICAgIH1cclxuICAgIGlmIChldmVudC50YXJnZXQudmFsdWUgPT09ICdyZWFkJykge1xyXG4gICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0ucGVybWlzc2lvbnNbcGVybWlzc2lvbkluZGV4XS5jaGVja2VkID0gZXZlbnQudGFyZ2V0LmNoZWNrZWQ7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFNlbGVjdGVkUGVybWlzaW9ucyhcclxuICAgICAgZXZlbnQudGFyZ2V0LmNoZWNrZWQsXHJcbiAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9uc1twZXJtaXNzaW9uSW5kZXhdLmlkLFxyXG4gICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0ucGVybWlzc2lvbnNbcGVybWlzc2lvbkluZGV4XS5jaGVja2VkLFxyXG4gICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0ucGVybWlzc2lvbnNbcGVybWlzc2lvbkluZGV4XS5jaGVja2Vkd3JpdGVcclxuICAgICk7XHJcbiAgICB0aGlzLmdldFBhZ2VDaGVja2VkKHBhZ2VJbmRleCk7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RQcml2aWxlZ2UocGFnZUluZGV4OiBudW1iZXIsIHBlcm1pc3Npb25JbmRleDogbnVtYmVyLCBwcml2aWxlZ2VJbmRleDogbnVtYmVyLCBldmVudDogYW55KSB7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGlmIChldmVudC50YXJnZXQudmFsdWUgPT09ICd3cml0ZScpIHtcclxuICAgICAgdGhpcy5wZXJtaXNzaW9uc1twYWdlSW5kZXhdLnBlcm1pc3Npb25zW3Blcm1pc3Npb25JbmRleF0ucGVybWlzc2lvbnNbcHJpdmlsZWdlSW5kZXhdLmNoZWNrZWR3cml0ZSA9XHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNoZWNrZWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID09PSAncmVhZCcgfHwgZXZlbnQudGFyZ2V0LnZhbHVlID09PSAnb24nKSB7XHJcbiAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9uc1twZXJtaXNzaW9uSW5kZXhdLnBlcm1pc3Npb25zW3ByaXZpbGVnZUluZGV4XS5jaGVja2VkID1cclxuICAgICAgICBldmVudC50YXJnZXQuY2hlY2tlZDtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U2VsZWN0ZWRQZXJtaXNpb25zKFxyXG4gICAgICBldmVudC50YXJnZXQuY2hlY2tlZCxcclxuICAgICAgdGhpcy5wZXJtaXNzaW9uc1twYWdlSW5kZXhdLnBlcm1pc3Npb25zW3Blcm1pc3Npb25JbmRleF0ucGVybWlzc2lvbnNbcHJpdmlsZWdlSW5kZXhdLmlkLFxyXG4gICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0ucGVybWlzc2lvbnNbcGVybWlzc2lvbkluZGV4XS5wZXJtaXNzaW9uc1twcml2aWxlZ2VJbmRleF0uY2hlY2tlZCxcclxuICAgICAgdGhpcy5wZXJtaXNzaW9uc1twYWdlSW5kZXhdLnBlcm1pc3Npb25zW3Blcm1pc3Npb25JbmRleF0ucGVybWlzc2lvbnNbcHJpdmlsZWdlSW5kZXhdLmNoZWNrZWR3cml0ZVxyXG4gICAgKTtcclxuICAgIHRoaXMuZ2V0UHJpdmlsYWdlQ2hlY2tlZChwYWdlSW5kZXgsIHBlcm1pc3Npb25JbmRleCk7XHJcbiAgICB0aGlzLmdldFBhZ2VDaGVja2VkKHBhZ2VJbmRleCk7XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlQ2hlY2tlZChwYWdlSW5kZXg6IG51bWJlcikge1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0uY2hlY2tlZCAhPT0gdGhpcy5nZXRDaGVja2VkKHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9ucykgJiZcclxuICAgICAgdGhpcy5wZXJtaXNzaW9uc1twYWdlSW5kZXhdLmNoZWNrZWR3cml0ZSAhPT0gdGhpcy5nZXRDaGVja2VkV3JpdGUodGhpcy5wZXJtaXNzaW9uc1twYWdlSW5kZXhdLnBlcm1pc3Npb25zKVxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5jaGVja2VkID0gdGhpcy5nZXRDaGVja2VkKHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9ucyk7XHJcbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWRQZXJtaXNpb25zKFxyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5jaGVja2VkLFxyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5pZCxcclxuICAgICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0uY2hlY2tlZCxcclxuICAgICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0uY2hlY2tlZHdyaXRlXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRQcml2aWxhZ2VDaGVja2VkKHBhZ2VJbmRleDogbnVtYmVyLCBwZXJtaXNzaW9uSW5kZXg6IG51bWJlcikge1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0ucGVybWlzc2lvbnNbcGVybWlzc2lvbkluZGV4XS5jaGVja2VkICE9PVxyXG4gICAgICB0aGlzLmdldENoZWNrZWQodGhpcy5wZXJtaXNzaW9uc1twYWdlSW5kZXhdLnBlcm1pc3Npb25zW3Blcm1pc3Npb25JbmRleF0ucGVybWlzc2lvbnMpXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5wZXJtaXNzaW9uc1twYWdlSW5kZXhdLnBlcm1pc3Npb25zW3Blcm1pc3Npb25JbmRleF0uY2hlY2tlZCA9IHRoaXMuZ2V0Q2hlY2tlZChcclxuICAgICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0ucGVybWlzc2lvbnNbcGVybWlzc2lvbkluZGV4XS5wZXJtaXNzaW9uc1xyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnNldFNlbGVjdGVkUGVybWlzaW9ucyhcclxuICAgICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0ucGVybWlzc2lvbnNbcGVybWlzc2lvbkluZGV4XS5jaGVja2VkLFxyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9uc1twZXJtaXNzaW9uSW5kZXhdLmlkLFxyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9uc1twZXJtaXNzaW9uSW5kZXhdLmNoZWNrZWQsXHJcbiAgICAgICAgdGhpcy5wZXJtaXNzaW9uc1twYWdlSW5kZXhdLnBlcm1pc3Npb25zW3Blcm1pc3Npb25JbmRleF0uY2hlY2tlZHdyaXRlXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2UgaWYgKFxyXG4gICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0ucGVybWlzc2lvbnNbcGVybWlzc2lvbkluZGV4XS5jaGVja2Vkd3JpdGUgIT09XHJcbiAgICAgIHRoaXMuZ2V0Q2hlY2tlZFdyaXRlKHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9uc1twZXJtaXNzaW9uSW5kZXhdLnBlcm1pc3Npb25zKVxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9uc1twZXJtaXNzaW9uSW5kZXhdLmNoZWNrZWR3cml0ZSA9IHRoaXMuZ2V0Q2hlY2tlZFdyaXRlKFxyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9uc1twZXJtaXNzaW9uSW5kZXhdLnBlcm1pc3Npb25zXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWRQZXJtaXNpb25zKFxyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbnNbcGFnZUluZGV4XS5wZXJtaXNzaW9uc1twZXJtaXNzaW9uSW5kZXhdLmNoZWNrZWQsXHJcbiAgICAgICAgdGhpcy5wZXJtaXNzaW9uc1twYWdlSW5kZXhdLnBlcm1pc3Npb25zW3Blcm1pc3Npb25JbmRleF0uaWQsXHJcbiAgICAgICAgdGhpcy5wZXJtaXNzaW9uc1twYWdlSW5kZXhdLnBlcm1pc3Npb25zW3Blcm1pc3Npb25JbmRleF0uY2hlY2tlZCxcclxuICAgICAgICB0aGlzLnBlcm1pc3Npb25zW3BhZ2VJbmRleF0ucGVybWlzc2lvbnNbcGVybWlzc2lvbkluZGV4XS5jaGVja2Vkd3JpdGVcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNlbGVjdEFsbEFjY2Vzcyh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgdGhpcy5wZXJtaXNzaW9ucy5mb3JFYWNoKChwYWdlOiBhbnkpID0+IHtcclxuICAgICAgcGFnZS5jaGVja2VkID0gdmFsdWU7XHJcbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWRQZXJtaXNpb25zKHZhbHVlLCBwYWdlLmlkLCBwYWdlLmNoZWNrZWQsIHBhZ2UuY2hlY2tlZHdyaXRlKTtcclxuICAgICAgaWYgKHBhZ2UgJiYgcGFnZS5wZXJtaXNzaW9ucykge1xyXG4gICAgICAgIHBhZ2UucGVybWlzc2lvbnMuZm9yRWFjaCgocGVybWlzc2lvbjogYW55KSA9PiB7XHJcbiAgICAgICAgICBwZXJtaXNzaW9uLmNoZWNrZWQgPSB2YWx1ZTtcclxuICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRQZXJtaXNpb25zKHZhbHVlLCBwZXJtaXNzaW9uLmlkLCBwZXJtaXNzaW9uLmNoZWNrZWQsIHBlcm1pc3Npb24uY2hlY2tlZHdyaXRlKTtcclxuICAgICAgICAgIGlmIChwZXJtaXNzaW9uICYmIHBlcm1pc3Npb24ucGVybWlzc2lvbnM/Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBwZXJtaXNzaW9uLnBlcm1pc3Npb25zLmZvckVhY2goKHByaXZpbGVnZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgcHJpdmlsZWdlLmNoZWNrZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICBwcml2aWxlZ2UuY2hlY2tlZHdyaXRlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZFBlcm1pc2lvbnModmFsdWUsIHByaXZpbGVnZS5pZCwgcHJpdmlsZWdlLmNoZWNrZWQsIHByaXZpbGVnZS5jaGVja2Vkd3JpdGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGROZXdSb2xlKGlkOiBzdHJpbmcpIHtcclxuICAgIHRoaXMucGVybWlzc2lvbnMgPSBbXTtcclxuICAgIHRoaXMuZm9ybVN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgdGhpcy5wZXJtaXNzaW9uQWxsb3cgPSBmYWxzZTtcclxuICAgIHRoaXMucm9sZXNTZXJ2aWNlLmdldFBlcm1pc3Npb25Sb2xlQnlJZChpZCkuc3Vic2NyaWJlKFxyXG4gICAgICAocmVzOiBhbnkpID0+IHtcclxuICAgICAgICB0aGlzLnBlcm1pc3Npb25BbGxvdyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5wZXJtaXNzaW9ucyA9IHJlc1snZGF0YSddO1xyXG4gICAgICB9LFxyXG4gICAgICAoZXJyOiBhbnkpID0+IGNvbnNvbGUubG9nKGVycilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzZXRTZWxlY3RlZFBlcm1pc2lvbnMoX3NlbGVjdGVkOiBib29sZWFuLCBpZDogbnVtYmVyLCBhbGxvdzogYm9vbGVhbiwgd3JpdGU6IGJvb2xlYW4pIHtcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zZWxlY3RlZFBlcm1pc3Npb25zR3JvdXAuZmluZEluZGV4KHJlcyA9PiByZXMuaWQgPT09IGlkKTtcclxuICAgIGlmIChpbmRleCA9PT0gLTEgJiYgYWxsb3cpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFBlcm1pc3Npb25zR3JvdXAucHVzaCh7IGlkLCBhbGxvdywgd3JpdGUgfSk7XHJcbiAgICB9IGVsc2UgaWYgKCFhbGxvdyAmJiAhd3JpdGUgJiYgaW5kZXggIT09IC0xKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRQZXJtaXNzaW9uc0dyb3VwLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9IGVsc2UgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkUGVybWlzc2lvbnNHcm91cCA9IHRoaXMuc2VsZWN0ZWRQZXJtaXNzaW9uc0dyb3VwLm1hcChpID0+IHtcclxuICAgICAgICBpZiAoaS5pZCA9PT0gaWQpIHtcclxuICAgICAgICAgIGkud3JpdGUgPSB3cml0ZTtcclxuICAgICAgICAgIGkuYWxsb3cgPSBhbGxvdztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWRkUm9sZSgpIHtcclxuICAgIHRoaXMuZm9ybVN1Ym1pdCA9IHRydWU7XHJcbiAgICBsZXQgZGF0YSA9IHRoaXMucm9sZUZvcm0uZ2V0UmF3VmFsdWUoKTtcclxuICAgIGlmICh0aGlzLnJvbGVGb3JtLnZhbGlkKSB7XHJcbiAgICAgIGNvbnN0IGRvc3NpZXJDb25maWcgPSB0aGlzLnJlcG9ydERhc2hib2FyZExpc3Q/LmZpbHRlcigoZG9zc2llcjogYW55KSA9PiBkb3NzaWVyLmlkID09PSBkYXRhLmRvc3NpZXJpZCk/Lm1hcCgoYTogYW55KSA9PiAoe1xyXG4gICAgICAgICAgaWQ6IGEuaWQsXHJcbiAgICAgICAgICBwcm9qZWN0SWQ6IGEucHJvamVjdElkXHJcbiAgICAgICAgfSkpWzBdO1xyXG4gICAgICBkYXRhLnByaW9yaXR5ID0gdGhpcy5lbnZpcm9ubWVudC5wcmlvcml0eTtcclxuICAgICAgZGF0YS5hcHBsaWNhdGlvbmlkID0gdGhpcy5lbnZpcm9ubWVudC5hcHBsaWNhdGlvbmlkO1xyXG4gICAgICBkYXRhLnBhcmVudGlkID0gMjtcclxuICAgICAgZGF0YS5wZXJtaXNzaW9ucyA9IHRoaXMuc2VsZWN0ZWRQZXJtaXNzaW9uc0dyb3VwO1xyXG4gICAgICBkYXRhLmRvc3NpZXJpZCA9IEpTT04uc3RyaW5naWZ5KGRvc3NpZXJDb25maWcpO1xyXG4gICAgICBkYXRhID0gT2JqZWN0LmFzc2lnbih7IG9yZ2FuaXphdGlvbmlkOiB0aGlzLm9yZ0lkIH0sIGRhdGEpO1xyXG4gICAgICBpZiAodGhpcy5yb2xlSWQpIHtcclxuICAgICAgICBkYXRhLmlkID0gTnVtYmVyKHRoaXMucm9sZUlkKTtcclxuICAgICAgICB0aGlzLnJvbGVzU2VydmljZS51cGRhdGVSb2xlKHRoaXMucm9sZUlkLCBkYXRhKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0Um9sZUxpc3QoKTtcclxuICAgICAgICAgICAgdGhpcy5tYXBQb2xpY3lHcm91cFRvUm9sZSh0aGlzLnJvbGVJZCwgZGF0YS5wb2xpY3lHcm91cElkKTtcclxuICAgICAgICAgICAgdGhpcy5hbGVydFNlcnZpY2Uuc3VjY2VzcygnUm9sZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIChlcnI6IGFueSkgPT4gdGhpcy5hbGVydFNlcnZpY2UuZXJyb3IoZXJyLmVycm9yLm1lc3NhZ2UpXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkYXRhLmlkID0gMDtcclxuICAgICAgICBkYXRhLnByaW9yaXR5ID0gdGhpcy5lbnZpcm9ubWVudC5wcmlvcml0eTtcclxuICAgICAgICB0aGlzLnJvbGVzU2VydmljZS5jcmVhdGVSb2xlKGRhdGEpLnN1YnNjcmliZShcclxuICAgICAgICAgIChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5wb2xpY3lHcm91cElkKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5tYXBQb2xpY3lHcm91cFRvUm9sZShyZXNbJ2RhdGEnXSwgZGF0YS5wb2xpY3lHcm91cElkLCAnYWRkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hbGVydFNlcnZpY2Uuc3VjY2VzcygnUm9sZSBzYXZlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgICAgICAgdGhpcy5nZXRSb2xlTGlzdCgpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIChlcnI6IGFueSkgPT4gdGhpcy5hbGVydFNlcnZpY2UuZXJyb3IoZXJyLmVycm9yLm1lc3NhZ2UpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbWFwUG9saWN5R3JvdXBUb1JvbGUoaWQ6IG51bWJlciwgZGF0YTogW10sIGFjdGlvbj86IHN0cmluZykge1xyXG4gICAgaWYgKGFjdGlvbiA9PT0gJ2FkZCcpIHtcclxuICAgICAgdGhpcy5yb2xlc1NlcnZpY2UuY3JlYXRlUG9saWN5R3JvdXBGb3JSb2xlKGlkLCBkYXRhKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgKCkgPT4gY29uc29sZS5sb2coJ3BvbGljeSBncm91cCBtYXBwZWQgdG8gcm9sZSBzdWNjZXNzZnVsbHknKSxcclxuICAgICAgICAoX2VycjogYW55KSA9PiB0aGlzLmFsZXJ0U2VydmljZS5lcnJvcihBcHBDb25zdGFudHMuZXJyb3JNZXNzYWdlKVxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5yb2xlc1NlcnZpY2UudXBkYXRlUG9saWN5R3JvdXBGb3JSb2xlKGlkLCBkYXRhKS5zdWJzY3JpYmUoXHJcbiAgICAgICAgKCkgPT4gY29uc29sZS5sb2coJ3BvbGljeSBncm91cCBtYXBwZWQgdG8gcm9sZSBzdWNjZXNzZnVsbHknKSxcclxuICAgICAgICAoX2VycjogYW55KSA9PiB0aGlzLmFsZXJ0U2VydmljZS5lcnJvcihBcHBDb25zdGFudHMuZXJyb3JNZXNzYWdlKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0UmV0dXJuVmFsdWUoYXJyYXk6IEFycmF5PGFueT4gPSBbXSwgdHlwZT86IHN0cmluZykge1xyXG4gICAgcmV0dXJuIHR5cGUgPT09ICdpZCdcclxuICAgICAgPyBhcnJheS5tYXAoKHsgaWQgfSkgPT4gaWQpXHJcbiAgICAgIDogYXJyYXkubWFwKGlkID0+IHtcclxuICAgICAgICByZXR1cm4geyBpZCB9O1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldENoZWNrZWQoaXRlbTogQXJyYXk8YW55Pikge1xyXG4gICAgcmV0dXJuIGl0ZW0uZmlsdGVyKCh7IGNoZWNrZWQgfSkgPT4gY2hlY2tlZCkubGVuZ3RoID4gMDtcclxuICB9XHJcbiAgZ2V0Q2hlY2tlZFdyaXRlKGl0ZW06IEFycmF5PGFueT4pIHtcclxuICAgIHJldHVybiBpdGVtLmZpbHRlcigoeyBjaGVja2Vkd3JpdGUgfSkgPT4gY2hlY2tlZHdyaXRlKS5sZW5ndGggPiAwO1xyXG4gIH1cclxuXHJcbiAgY2FuY2VsKCkge1xyXG4gICAgdGhpcy5yb2xlRm9ybS5yZXNldCgpO1xyXG4gICAgdGhpcy5yb2xlRm9ybS5lbmFibGUoKTtcclxuICAgIHRoaXMucGVybWlzc2lvbnMgPSBbXTtcclxuICAgIHRoaXMuZm9ybVN1Ym1pdCA9IGZhbHNlO1xyXG4gICAgdGhpcy5wZXJtaXNzaW9uQWxsb3cgPSBmYWxzZTtcclxuICAgIHRoaXMucm9sZUlkID0gMDtcclxuICB9XHJcblxyXG4gIGRlbGV0ZShldmVudDogRXZlbnQsIGlkOiBhbnkpIHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5kZWxldGVkSWQgPSBpZDtcclxuICAgICQoJyNEZWxldGV1c2VyJykubW9kYWwoJ3Nob3cnKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZVJvbGUoKSB7XHJcbiAgICB0aGlzLnJvbGVzU2VydmljZS5kZWxldGVSb2xlKHRoaXMuZGVsZXRlZElkKS5zdWJzY3JpYmUoXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICB0aGlzLmNhbmNlbCgpO1xyXG4gICAgICAgIHRoaXMuYWxlcnRTZXJ2aWNlLnN1Y2Nlc3MoJ1JvbGUgZGVsZXRlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgICAkKCcjRGVsZXRldXNlcicpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgdGhpcy5nZXRSb2xlTGlzdCgpO1xyXG4gICAgICB9LFxyXG4gICAgICAoX2VycjogYW55KSA9PiB0aGlzLmFsZXJ0U2VydmljZS5lcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBSb2xlJylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRSZXBvcnREYXNoYm9hcmQoKSB7XHJcbiAgICB0aGlzLnJlcG9ydERhc2hib2FyZExpc3QgPSBhd2FpdCB0aGlzLm1zdHJTZXJ2aWNlLmdldExpYnJhcnlEZXRhaWxzKHRoaXMuUkJBQ09SRyk7XHJcbiAgfVxyXG5cclxuICAvLyByb2xlVmFsaWRhdGlvbigpOiBhbnkge1xyXG4gIC8vICAgaWYgKCF0aGlzLnJvbGVGb3JtLnZhbHVlLmRvc3NpZXJpZCkge1xyXG4gIC8vICAgICB0aGlzLmFsZXJ0U2VydmljZS53YXJuKCdQbGVhc2UgZmlsbCBhbGwgcmVxdWlyZWQgZmllbGRzJyk7XHJcbiAgLy8gICAgIHJldHVybiBmYWxzZTtcclxuICAvLyAgIH1cclxuICAvLyAgIHJldHVybiB0cnVlO1xyXG4gIC8vIH1cclxuICBvbk1vZGVsUm9sZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aGlzLm1vZGVsUm9sZU5hbWUgPSB2YWx1ZS5yZXBsYWNlKC9cXHdcXFMqL2csICh0eHQpID0+IHR4dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR4dC5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKSk7XHJcbiAgfVxyXG4gIFxyXG4gIGFjdGl2YXRlTWVudShldmVudCkge1xyXG4gICAgaWYgKGV2ZW50Lml0ZW0ubGFiZWwgPT0gJ1Blcm1pc3Npb25zJykge1xyXG4gICAgICB0aGlzLmZpcnN0VGFiID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZmlyc3RUYWIgPSBmYWxzZTtcclxuICAgICAgdGhpcy5nZXRQYWdlSW5mb3JtYXRpb24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIFxyXG5cclxuICBcclxuICBnZXRQYWdlSW5mb3JtYXRpb24oKSB7XHJcbiAgICB0aGlzLnBlcm1pc3Npb25TZXJ2aWNlLmdldEFsbFBhZ2VzKCkuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xyXG4gICAgICB0aGlzLm1lbnVMaXN0ID0gcmVzPy5kYXRhO1xyXG4gICAgICByZXMuZGF0YS5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7IFxyXG4gICAgICAgIGl0ZW0ubGFiZWwgPSBpdGVtLm5hbWVcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLm5lc3RlZERhdGEoKTtcclxuICAgICAgY29uc29sZS5sb2codGhpcy5tYWluTWVudUxpc3QpO1xyXG4gICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVzdWx0JykuaW5uZXJIVE1MID0gdGhpcy5idWlsZE5hdmlnYXRpb24odGhpcy5tZW51TGlzdCk7XHJcblxyXG4gICAgICAvLyByZXMuZGF0YS5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgIC8vICAgaWYgKGl0ZW0ucGFyZW50aWQgPT0gbnVsbCkge1xyXG4gICAgICAvLyAgICAgbGV0IG9iaiA9IHtcclxuICAgICAgLy8gICAgICAga2V5IDogMSxcclxuICAgICAgLy8gICAgICAgaWQ6IGl0ZW0uaWQsXHJcbiAgICAgIC8vICAgICAgIHBhcmVudGlkOiBpdGVtLnBhcmVudGlkLFxyXG4gICAgICAvLyAgICAgICBsYWJlbDogaXRlbS5uYW1lLFxyXG4gICAgICAvLyAgICAgICBkYXRhOiAnRG9jdW1lbnRzIEZvbGRlcicsXHJcbiAgICAgIC8vICAgICAgIGljb246ICdwaSBwaS1mdyBwaS1pbmJveCcsXHJcbiAgICAgIC8vICAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgICAvLyAgICAgfVxyXG4gICAgICAvLyAgICAgdGhpcy5tYWluTWVudUxpc3QucHVzaChvYmopXHJcbiAgICAgIC8vICAgfVxyXG4gICAgICAvLyB9KTtcclxuXHJcbiAgICAgIC8vIHRoaXMubWFpbk1lbnVMaXN0Lm1hcCgobWVudSwgaW5kZXgxKSA9PiB7XHJcbiAgICAgIC8vICAgdGhpcy5tZW51TGlzdC5tYXAoKGxpc3QsIGluZGV4KSA9PiB7XHJcbiAgICAgIC8vICAgICBpZiAobGlzdD8ucGFyZW50aWQgPT0gbWVudT8uaWQpIHtcclxuICAgICAgLy8gICAgICAgbGV0IG9iaiA9IHtcclxuICAgICAgLy8gICAgICAgICBrZXkgOiAyLFxyXG4gICAgICAvLyAgICAgICAgIGlkOiBsaXN0LmlkLFxyXG4gICAgICAvLyAgICAgICAgIHBhcmVudGlkOiBsaXN0LnBhcmVudGlkLFxyXG4gICAgICAvLyAgICAgICAgIGxhYmVsOiBsaXN0Lm5hbWUsXHJcbiAgICAgIC8vICAgICAgICAgZGF0YTogJ0RvY3VtZW50cyBGb2xkZXInLFxyXG4gICAgICAvLyAgICAgICAgIGljb246ICdwaSBwaS1mdyBwaS1pbmJveCcsXHJcbiAgICAgIC8vICAgICAgICAgY2hpbGRyZW46IFtdXHJcbiAgICAgIC8vICAgICAgIH1cclxuICAgICAgLy8gICAgICAgdGhpcy5tYWluTWVudUxpc3RbaW5kZXgxXS5jaGlsZHJlbi5wdXNoKG9iaik7XHJcbiAgICAgIC8vICAgICB9XHJcbiAgICAgIC8vICAgfSlcclxuICAgICAgLy8gfSlcclxuXHJcbiAgICAgIC8vIHRoaXMubWFpbk1lbnVMaXN0Lm1hcCgobWVudSwgaW5kZXgxKSA9PiB7XHJcbiAgICAgIC8vICAgbWVudS5jaGlsZHJlbi5tYXAoKHN1Yml0ZW0sIHN1YmluZGV4KSA9PiB7XHJcbiAgICAgIC8vICAgICB0aGlzLm1lbnVMaXN0Lm1hcCgobGlzdCwgaW5kZXgpID0+IHtcclxuICAgICAgLy8gICAgICAgaWYobGlzdC5wYXJlbnRpZCA9PSBzdWJpdGVtLmlkKVxyXG4gICAgICAvLyAgICAgICB7XHJcbiAgICAgIC8vICAgICAgICAgbGV0IG9iaiA9IHtcclxuICAgICAgLy8gICAgICAgICAgICAga2V5IDogMywgICAgICAgICAgICAgIFxyXG4gICAgICAvLyAgICAgICAgICAgICBpZDogbGlzdC5pZCxcclxuICAgICAgLy8gICAgICAgICAgICAgcGFyZW50aWQ6IGxpc3QucGFyZW50aWQsXHJcbiAgICAgIC8vICAgICAgICAgICAgIGxhYmVsOiBsaXN0Lm5hbWUsXHJcbiAgICAgIC8vICAgICAgICAgICAgIGRhdGE6ICdEb2N1bWVudHMgRm9sZGVyJyxcclxuICAgICAgLy8gICAgICAgICAgICAgaWNvbjogJ3BpIHBpLWZ3IHBpLWluYm94JyxcclxuICAgICAgLy8gICAgICAgICAgIH1cclxuICAgICAgLy8gICAgICAgICAgIHN1Yml0ZW0uY2hpbGRyZW4ucHVzaChvYmopO1xyXG4gICAgICAvLyAgICAgICB9XHJcblxyXG4gICAgICAvLyAgICAgfSlcclxuICAgICAgLy8gICB9KVxyXG4gICAgICAvLyB9KVxyXG5cclxuXHJcblxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIHVwZGF0ZU1lbnVPcmRlcigpIHtcclxuICAgIHRoaXMubWFpbk1lbnVMaXN0LmZvckVhY2goKGVsZW1lbnQsIGluZGV4KSA9PiB7XHJcbiAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICdtZW51b3JkZXInOiBpbmRleCArIDEsXHJcbiAgICAgICAgJ2lkJzogZWxlbWVudC5yb2xlcGVybWlzc2lvbmlkLCAgICAgICAgXHJcbiAgICAgICAgJ3JvbGVpZCcgOiAgIHRoaXMucm9sZUlkXHJcbiAgICAgICAgXHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5yZUFycmFuZ2VkTGlzdC5wdXNoKGRhdGEpXHJcbiAgICAgIGlmKGVsZW1lbnQ/LmNoaWxkcmVuPy5sZW5ndGggPiAwKXtcclxuICAgICAgICBlbGVtZW50Py5jaGlsZHJlbj8uZm9yRWFjaCgoY2hpbGRlbGVtZW50LCBjaGlsZGluZGV4KT0+IHtcclxuICAgICAgICAgIGxldCBjaGlsZGRhdGEgPSB7XHJcbiAgICAgICAgICAgICdtZW51b3JkZXInOiBjaGlsZGluZGV4ICsgMSxcclxuICAgICAgICAgICAgJ2lkJzogY2hpbGRlbGVtZW50LnJvbGVwZXJtaXNzaW9uaWQsXHJcbiAgICAgICAgICAgICdyb2xlaWQnIDogICB0aGlzLnJvbGVJZFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5yZUFycmFuZ2VkTGlzdC5wdXNoKGNoaWxkZGF0YSlcclxuICAgICAgICAgIGlmKGNoaWxkZWxlbWVudD8uY2hpbGRyZW4/Lmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICBjaGlsZGVsZW1lbnQ/LmNoaWxkcmVuPy5mb3JFYWNoKChjaGlsZHJlbmVsZW1lbnQsIGNoaWxkcmVuaW5kZXgpPT4ge1xyXG4gICAgICAgICAgICAgIGxldCBjaGlsZHJlbmRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAnbWVudW9yZGVyJzogY2hpbGRyZW5pbmRleCArIDEsXHJcbiAgICAgICAgICAgICAgICAnaWQnOiBjaGlsZHJlbmVsZW1lbnQucm9sZXBlcm1pc3Npb25pZCxcclxuICAgICAgICAgICAgICAgICdyb2xlaWQnIDogICB0aGlzLnJvbGVJZFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0aGlzLnJlQXJyYW5nZWRMaXN0LnB1c2goY2hpbGRyZW5kYXRhKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZygndGhpcy5yZWFycmFuZ2VsaXN0JywgdGhpcy5yZUFycmFuZ2VkTGlzdCk7XHJcbiAgICB0aGlzLnBlcm1pc3Npb25TZXJ2aWNlLnVwZGF0ZU1lbnVPcmRlcih7IHBhZ2VzOiB0aGlzLnJlQXJyYW5nZWRMaXN0IH0pLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgdGhpcy5hbGVydFNlcnZpY2Uuc3VjY2VzcygnVXBkYXRlZCBTdWNjZXNzZnVsbHkhJyk7XHJcbiAgICAgIC8vIHRoaXMuU2VydmljZS5zZW5kVXBkYXRlKCdVcGRhdGVkIFN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAvLyB0aGlzLmdldFBhZ2VJbmZvcm1hdGlvbigpO1xyXG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIFxyXG5cclxuICBub2RlRHJvcChldmVudCkge1xyXG4gICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQudGFyZ2V0LmNoaWxkTm9kZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGlmIChldmVudC5kcmFnTm9kZS5wYXJlbnRpZCA9PSBldmVudC5kcm9wTm9kZS5wYXJlbnRpZCkge1xyXG4gICAgICAgIGV2ZW50LmFjY2VwdCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYWxlcnRTZXJ2aWNlLnN1Y2Nlc3MoJ25vdCBhbGxvd2VkIHRvIGRyb3AnKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zb2xlLmxvZygndGhpcy5tYWluTWVudUxpc3QnLCAgdGhpcy5tYWluTWVudUxpc3QpXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5hbGVydFNlcnZpY2Uuc3VjY2Vzcygnbm90IGFsbG93ZWQgdG8gZHJvcCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn1cclxuXHJcblxyXG5cclxuIiwiPGFwcC1hbGVydD48L2FwcC1hbGVydD5cclxuPGRpdiBjbGFzcz1cInBlcm1pc3Npb25cIj5cclxuICA8ZGl2IGNsYXNzPVwicm93XCIgW2Zvcm1Hcm91cF09XCJyb2xlRm9ybVwiPlxyXG4gICAgPGRpdiBjbGFzcz1cImNvbC1sZy00IGNvbC1tZC02IGNvbC0xMlwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY2xlYXJmaXhcIj48L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cInRhYi1jb250ZW50IHB5LTIgcHgtMiBweC1zbS0wXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRhYi1wYW5lIGZhZGUgc2hvdyBhY3RpdmVcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGJnaWNvbnNlYXJjaFwiPlxyXG4gICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBmaWVsZEtleT1cIlNFVFRJTkdTX1JPTF9TRUFSQ0hfQllfTkFNRVwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIGJ5IFJvbGUgbmFtZVwiXHJcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIiAoa2V5dXApPVwic2VhcmNoUm9sZSgkZXZlbnQpXCIgLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNsZWFyZml4XCI+PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidXNlcmFjZXNzXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1jZW50ZXIgaC0xMDAgdy0xMDAgbmctc3Rhci1pbnNlcnRlZFwiXHJcbiAgICAgICAgICAgICAgKm5nSWY9XCIhZmlsdGVyZWRSb2xlTGlzdC5sZW5ndGhcIj5cclxuICAgICAgICAgICAgICA8cD5ObyBSZWNvcmQgRm91bmQ8L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBpdGVtIG9mIGZpbHRlcmVkUm9sZUxpc3RcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IHVzZXJkYXRhIGFsaWduLWl0ZW1zLWNlbnRlclwiIChjbGljayk9XCJnZXRSb2xlSW5mbyhpdGVtLmlkKVwiIFtuZ0NsYXNzXT1cInsgYWN0aXZlOiAraXRlbS5pZCA9PT0gcm9sZUlkIH1cIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtMTAgY29sLXNtLTEwIGNvbC0xMCBvdmVyZmxvd190eHRcIj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJuYW1ldXNlclwiPnt7IGl0ZW0ubmFtZSB9fTwvc3Bhbj4gPGJyIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtMiB0ZXh0LXJpZ2h0XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicmlnaHQtaWNvbnNcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZW0gY2xhc3M9XCJmYSBmYS10cmFzaCB0ZXh0LXByaW1hcnlcIiAoY2xpY2spPVwiZGVsZXRlKCRldmVudCwgaXRlbS5pZClcIiBhcmlhLWhpZGRlbj1cInRydWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgKnNob3dGaWVsZD1cIidTRVRUSU5HU19ST0xfREVMRVRFJ1wiPjwvZW0+XHJcbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cImNvbC1sZy04IGNvbC1tZC02IGNvbC0xMiByb2xlcy1yaWdodCBncm91cC1yb2xlIG10LTJcIj5cclxuICAgICAgPHAtY2FyZCBjbGFzcz1cInJiYWMtY2FyZFwiIFtzdHlsZV09XCJ7IHdpZHRoOiAnMTAwJScsICdtYXJnaW4tYm90dG9tJzogJzJlbScgfVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdHJpcF9oZWFkIHRvZ2dsZWxlZnRcIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwicmVwb3J0X2hlYWQgZm9udC13ZWlnaHQtYm9sZFwiPlJvbGUgRGV0YWlsczwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicC1mbHVpZCBwLWZvcm1ncmlkIHAtZ3JpZFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInAtZmllbGQgY29sLWxnLTQgY29sLW1kLTEyIGNvbC0xMlwiPlxyXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwicm9sZXNOYW1lXCIgY2xhc3M9XCJyZWZlcnJhbC1mb3JtLWxhYmVsc1wiPlJvbGUgTmFtZVxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicmVxdWlyZWRmaWVsZCB0ZXh0LWRhbmdlclwiPio8L3NwYW4+XHJcbiAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxpbnB1dCBpZD1cInJvbGVzTmFtZVwiIHR5cGU9XCJ0ZXh0XCIgZmllbGRLZXk9XCJTRVRUSU5HU19ST0xfUk9MRV9OQU1FXCIgZm9ybUNvbnRyb2xOYW1lPVwibmFtZVwiXHJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciBSb2xlIE5hbWVcIiBhcmlhLWRlc2NyaWJlZGJ5PVwicm9sZXNOYW1lXCIgWyhuZ01vZGVsKV09XCJtb2RlbFJvbGVOYW1lXCJcclxuICAgICAgICAgICAgICAobmdNb2RlbENoYW5nZSk9XCJvbk1vZGVsUm9sZSgkZXZlbnQpXCIgcElucHV0VGV4dCAvPlxyXG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiZm9ybVZhbGlkYXRlWyduYW1lJ10uZXJyb3JzICYmIGZvcm1TdWJtaXRcIj5cclxuICAgICAgICAgICAgICA8c21hbGwgKm5nSWY9XCJmb3JtVmFsaWRhdGVbJ25hbWUnXS5pbnZhbGlkXCIgY2xhc3M9XCJwLWVycm9yIGJsb2NrXCI+Um9sZSBOYW1lIGlzIHJlcXVpcmVkIDwvc21hbGw+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicC1maWVsZCBjb2wtbGctNCBjb2wtbWQtMTIgY29sLTEyXCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBhcmlhLWxhYmVsbGVkYnk9XCJwb2xpY3lHcm91cExpc3RcIiBmb3I9XCJwb2xpY3lHcm91cExpc3RcIiBjbGFzcz1cInJlZmVycmFsLWZvcm0tbGFiZWxzXCJcclxuICAgICAgICAgICAgICA+UG9saWN5IEdyb3Vwc1xyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicmVxdWlyZWRmaWVsZCB0ZXh0LWRhbmdlclwiPio8L3NwYW4+XHJcbiAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxwLW11bHRpU2VsZWN0IG5hbWU9XCJwb2xpY3lHcm91cExpc3RcIiBbb3B0aW9uc109XCJwb2xpY3lHcm91cExpc3RcIiBmb3JtQ29udHJvbE5hbWU9XCJwb2xpY3lHcm91cElkXCJcclxuICAgICAgICAgICAgICBkZWZhdWx0TGFiZWw9XCJTZWxlY3QgUG9saWN5IEdyb3Vwc1wiIG9wdGlvbkxhYmVsPVwicG9saWN5Z3JvdXBuYW1lXCIgb3B0aW9uVmFsdWU9XCJpZFwiXHJcbiAgICAgICAgICAgICAgaW5wdXRJZD1cInBvbGljeUdyb3VwTGlzdFwiIGFyaWFGaWx0ZXJMYWJlbD1cIm51bGxcIiBmaWVsZEtleT1cIlNFVFRJTkdTX1JPTF9QT0xJQ1lfR1JPVVBcIiBkaXNwbGF5PVwiY2hpcFwiPlxyXG4gICAgICAgICAgICA8L3AtbXVsdGlTZWxlY3Q+XHJcbiAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJmb3JtVmFsaWRhdGVbJ3BvbGljeUdyb3VwSWQnXS5lcnJvcnMgJiYgZm9ybVN1Ym1pdFwiPlxyXG4gICAgICAgICAgICAgIDxzbWFsbCAqbmdJZj1cImZvcm1WYWxpZGF0ZVsncG9saWN5R3JvdXBJZCddLmludmFsaWRcIiBjbGFzcz1cInAtZXJyb3IgYmxvY2tcIj5Qb2xpY3kgR3JvdXAgaXMgcmVxdWlyZWQgPC9zbWFsbD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwLWZpZWxkIGNvbC1sZy00IGNvbC1tZC0xMiBjb2wtMTJcIj5cclxuICAgICAgICAgICAgPGxhYmVsIGFyaWEtbGFiZWxsZWRieT1cImxhbmRpbmdQYWdlXCIgZm9yPVwibGFuZGluZ1BhZ2VcIiBjbGFzcz1cInJlZmVycmFsLWZvcm0tbGFiZWxzXCI+TGFuZGluZyBQYWdlXHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXF1aXJlZGZpZWxkIHRleHQtZGFuZ2VyXCI+Kjwvc3Bhbj5cclxuICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgPHAtZHJvcGRvd24gbmFtZT1cImxhbmRpbmdQYWdlXCIgW29wdGlvbnNdPVwibGFuZGluZ1BhZ2VcIiBbZmlsdGVyXT1cInRydWVcIiBbZWRpdGFibGVdPVwidHJ1ZVwiIGZvcm1Db250cm9sTmFtZT1cImRlZmF1bHRwYWdlaWRcIlxyXG4gICAgICAgICAgICAgIGRlZmF1bHRMYWJlbD1cIlNlbGVjdCBMYW5kaW5nIFBhZ2VcIiBmaWVsZEtleT1cIlNFVFRJTkdTX1JPTF9MQU5ESU5HX1BBR0VcIiBvcHRpb25MYWJlbD1cIm5hbWVcIlxyXG4gICAgICAgICAgICAgIG9wdGlvblZhbHVlPVwiaWRcIiBpbnB1dElkPVwibGFuZGluZ1BhZ2VcIj5cclxuICAgICAgICAgICAgPC9wLWRyb3Bkb3duPlxyXG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiZm9ybVZhbGlkYXRlWydkZWZhdWx0cGFnZWlkJ10uZXJyb3JzICYmIGZvcm1TdWJtaXRcIj5cclxuICAgICAgICAgICAgICA8c21hbGwgKm5nSWY9XCJmb3JtVmFsaWRhdGVbJ2RlZmF1bHRwYWdlaWQnXS5pbnZhbGlkXCIgY2xhc3M9XCJwLWVycm9yIGJsb2NrXCI+TGFuZGluZyBQYWdlIGlzIHJlcXVpcmVkXHJcbiAgICAgICAgICAgICAgPC9zbWFsbD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwLWZpZWxkIGNvbC1sZy00IGNvbC1tZC0xMiBjb2wtMTJcIj5cclxuICAgICAgICAgICAgPGxhYmVsIGFyaWEtbGFiZWxsZWRieT1cImRvc3NpZXJJZFwiIGZvcj1cImRvc3NpZXJJZFwiIGNsYXNzPVwicmVmZXJyYWwtZm9ybS1sYWJlbHNcIj5SZXBvcnQgRGFzaGJvYXJkPC9sYWJlbD5cclxuICAgICAgICAgICAgPHAtZHJvcGRvd25cclxuICAgICAgICAgICAgICBbb3B0aW9uc109XCJyZXBvcnREYXNoYm9hcmRMaXN0XCJcclxuICAgICAgICAgICAgICBvcHRpb25MYWJlbD1cIm5hbWVcIlxyXG4gICAgICAgICAgICAgIGlkPVwiZG9zc2llcmlkXCJcclxuICAgICAgICAgICAgICBvcHRpb25WYWx1ZT1cImlkXCJcclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlbGVjdCBJRFwiXHJcbiAgICAgICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiZG9zc2llcmlkXCI+PC9wLWRyb3Bkb3duPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicC1maWVsZCBjb2wtbGctNCBjb2wtbWQtMTIgY29sLTEyXCI+PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicC1maWVsZCBjb2wtbGctNCBjb2wtbWQtMTIgY29sLTEyXCI+XHJcbiAgICAgICAgICAgIDwhLS0gPGJ1dHRvblxyXG4gICAgICAgICAgICAgIGNsYXNzPVwicHVsbC1yaWdodCBtYi0yIGJ0biBidG4tcHJpbWFyeSBidG5jb21tb24gcmVwb3J0X2J1dHRvblwiXHJcbiAgICAgICAgICAgICAgZmllbGRLZXk9XCJTRVRUSU5HU19ST0xfQ09ORklHVVJFX1BFUk1JU1NJT05cIlxyXG4gICAgICAgICAgICAgIChjbGljayk9XCJhZGROZXdSb2xlKCcxJylcIj5cclxuICAgICAgICAgICAgICBDb25maWd1cmUgUGVybWlzc2lvblxyXG4gICAgICAgICAgICA8L2J1dHRvbj4gLS0+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibXQtMlwiICpuZ0lmPVwicGVybWlzc2lvbkFsbG93XCI+XHJcbiAgICAgICAgICA8YnV0dG9uIGZpZWxkS2V5PVwiU0VUVElOR1NfUk9MX1JFU0VUXCIgY2xhc3M9XCJwdWxsLXJpZ2h0IG1iLTIgbXItMiBidG4gYmctd2hpdGUgdGV4dC1wcmltYXJ5IGJ0bmNhbmNlbFwiXHJcbiAgICAgICAgICAgIChjbGljayk9XCJzZWxlY3RBbGxBY2Nlc3MoZmFsc2UpXCI+XHJcbiAgICAgICAgICAgIFJlc2V0XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwdWxsLXJpZ2h0IG1iLTIgbXItMiBidG4gYnRuLXByaW1hcnkgYnRuY29tbW9uXCIgZmllbGRLZXk9XCJTRVRUSU5HU19ST0xfU0VMRUNUX0FMTFwiXHJcbiAgICAgICAgICAgIChjbGljayk9XCJzZWxlY3RBbGxBY2Nlc3ModHJ1ZSlcIj5cclxuICAgICAgICAgICAgU2VsZWN0IEFsbFxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8IS0tIDxiciAvPiAtLT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwic3RyaXBfaGVhZCB0b2dnbGVsZWZ0IGFkanVzdHRvcFwiICpuZ0lmPVwicGVybWlzc2lvbkFsbG93XCI+XHJcbiAgICAgICAgICA8IS0tIDxzcGFuIGNsYXNzPVwicmVwb3J0X2hlYWQgZm9udC13ZWlnaHQtYm9sZFwiPlBlcm1pc3Npb25zPC9zcGFuPiAtLT5cclxuICAgICAgICAgIDxwLXRhYk1lbnUgW21vZGVsXT1cIml0ZW1zXCIgW2FjdGl2ZUl0ZW1dPVwiYWN0aXZlSXRlbVwiPjwvcC10YWJNZW51PlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8ZGl2ICpuZ0lmPVwiZmlyc3RUYWJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjbGVhcmZpeFwiPjwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm10LTQgbWItNFwiPlxyXG4gICAgICAgICAgICA8cC1hY2NvcmRpb24gY2xhc3M9XCJ3LTEwMFwiPlxyXG4gICAgICAgICAgICAgIDxwLWFjY29yZGlvblRhYiBjbGFzcz1cInctMTAwXCIgKm5nRm9yPVwibGV0IHBhZ2Ugb2YgcGVybWlzc2lvbnM7IGxldCBpID0gaW5kZXhcIj5cclxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBwVGVtcGxhdGU9XCJoZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgICAge3sgcGFnZS5kZXNjcmlwdGlvbiB9fVxyXG4gICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBwVGVtcGxhdGU9XCJjb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkaW5nX2FuYWx5c2lzIGRhdGFtYXJnaW5cIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiQ3VzdG9tY2hlY2tib3ggcGwtMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwic3R5bGVkLWNoZWNrYm94XCIgaWQ9XCJjdXN0b217eyBpIH19XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGNoYW5nZSk9XCJzZWxlY3RBbGxQYWdlKGksICRldmVudClcIiBbY2hlY2tlZF09XCJwYWdlPy5jaGVja2VkXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjdXN0b217eyBpIH19XCIgY2xhc3M9XCJoZWFkaW5nX3JvbGVcIj57eyBwYWdlLmRlc2NyaXB0aW9uIH19PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJtYXJnaW51bF9saXN0IGVjbXNfcm9sZXNjcm9sbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IHBlcm1pc3Npb24gb2YgcGFnZT8ucGVybWlzc2lvbnM7IGxldCBqID0gaW5kZXhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJpc1ByaXZpbGFnZShwZXJtaXNzaW9uKTsgZWxzZSBwZXJtaXNzaW9uT25seVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlubmVyX2NoaWxkYWNjZXNzIGQtZmxleCBtdC0wIHB5LTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWlubGluZS1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJDdXN0b21jaGVja2JveCBwbC0xIG1iLTBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgW2NoZWNrZWRdPVwicGVybWlzc2lvbj8uY2hlY2tlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2hhbmdlKT1cInNlbGVjdEFsbFByaXZpbGFnZShpLCBqLCAkZXZlbnQpXCIgaWQ9XCJkZXNjcmlwdGlvbnt7IGogfX1cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2hlY2ttYXJrXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZGVzY3JpcHRpb257eyBqIH19XCIgY2xhc3M9XCJoZWFkaW5nX3JvbGUgbWItMFwiPnt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbi5kZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJtbC0xXCIgKm5nRm9yPVwibGV0IHByaXZpbGVnZSBvZiBwZXJtaXNzaW9uPy5wZXJtaXNzaW9uczsgbGV0IGsgPSBpbmRleFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXN0b20tY29udHJvbCBjdXN0b20tc3dpdGNoXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBbY2hlY2tlZF09XCJwcml2aWxlZ2U/LmNoZWNrZWRcIiBjbGFzcz1cImN1c3RvbS1jb250cm9sLWlucHV0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cImN1c3RvbVN3aXRjaGVzcm9sZXNze3sgaSB9fXt7IGogfX17eyBrIH19XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwic2VsZWN0UHJpdmlsZWdlKGksIGosIGssICRldmVudClcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJjdXN0b20tY29udHJvbC1sYWJlbFwiIGZvcj1cImN1c3RvbVN3aXRjaGVzcm9sZXNze3sgaSB9fXt7IGogfX17eyBrIH19XCI+e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcml2aWxlZ2UuZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNwZXJtaXNzaW9uT25seT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXN0b20tY29udHJvbCBjdXN0b20tc3dpdGNoXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgW2NoZWNrZWRdPVwicGVybWlzc2lvbj8uY2hlY2tlZFwiIGNsYXNzPVwiY3VzdG9tLWNvbnRyb2wtaW5wdXRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwic2VsZWN0UGFnZShpLCBqLCAkZXZlbnQpXCIgaWQ9XCJjdXN0b21Td2l0Y2hlc3JvbGVze3sgaSB9fXt7IGogfX1cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiY3VzdG9tLWNvbnRyb2wtbGFiZWxcIiBmb3I9XCJjdXN0b21Td2l0Y2hlc3JvbGVze3sgaSB9fXt7IGogfX1cIj57e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uLmRlc2NyaXB0aW9uIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgICAgICAgICAgICAgPC9wLWFjY29yZGlvblRhYj5cclxuICAgICAgICAgICAgPC9wLWFjY29yZGlvbj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC0xMiBib3ggZC1ub25lXCIgKm5nRm9yPVwibGV0IHBhZ2Ugb2YgcGVybWlzc2lvbnM7IGxldCBpID0gaW5kZXhcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGluZ19hbmFseXNpcyBkYXRhbWFyZ2luXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiQ3VzdG9tY2hlY2tib3hcIj5cclxuICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwic3R5bGVkLWNoZWNrYm94XCIgaWQ9XCJjdXN0b217eyBpIH19XCIgKGNoYW5nZSk9XCJzZWxlY3RBbGxQYWdlKGksICRldmVudClcIlxyXG4gICAgICAgICAgICAgICAgICAgIFtjaGVja2VkXT1cInBhZ2U/LmNoZWNrZWRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY3VzdG9te3sgaSB9fVwiIGNsYXNzPVwiaGVhZGluZ19yb2xlXCI+e3sgcGFnZS5kZXNjcmlwdGlvbiB9fTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgPHVsIGNsYXNzPVwibWFyZ2ludWxfbGlzdCBlY21zX3JvbGVzY3JvbGxcIj5cclxuICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IHBlcm1pc3Npb24gb2YgcGFnZT8ucGVybWlzc2lvbnM7IGxldCBqID0gaW5kZXhcIj5cclxuICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImlzUHJpdmlsYWdlKHBlcm1pc3Npb24pOyBlbHNlIHBlcm1pc3Npb25Pbmx5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlubmVyX2NoaWxkYWNjZXNzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cIkN1c3RvbWNoZWNrYm94XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIFtjaGVja2VkXT1cInBlcm1pc3Npb24/LmNoZWNrZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNoYW5nZSk9XCJzZWxlY3RBbGxQcml2aWxhZ2UoaSwgaiwgJGV2ZW50KVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjaGVja21hcmtcIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaGVhZGluZ19yb2xlXCI+e3sgcGVybWlzc2lvbi5kZXNjcmlwdGlvbiB9fTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpICpuZ0Zvcj1cImxldCBwcml2aWxlZ2Ugb2YgcGVybWlzc2lvbj8ucGVybWlzc2lvbnM7IGxldCBrID0gaW5kZXhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXN0b20tY29udHJvbCBjdXN0b20tc3dpdGNoXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBbY2hlY2tlZF09XCJwcml2aWxlZ2U/LmNoZWNrZWRcIiBjbGFzcz1cImN1c3RvbS1jb250cm9sLWlucHV0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cImN1c3RvbVN3aXRjaGVzcm9sZXNze3sgaSB9fXt7IGogfX17eyBrIH19XCIgKGNsaWNrKT1cInNlbGVjdFByaXZpbGVnZShpLCBqLCBrLCAkZXZlbnQpXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiY3VzdG9tLWNvbnRyb2wtbGFiZWxcIiBmb3I9XCJjdXN0b21Td2l0Y2hlc3JvbGVzc3t7IGkgfX17eyBqIH19e3sgayB9fVwiPnt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpdmlsZWdlLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX08L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjcGVybWlzc2lvbk9ubHk+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImN1c3RvbS1jb250cm9sIGN1c3RvbS1zd2l0Y2hcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIFtjaGVja2VkXT1cInBlcm1pc3Npb24/LmNoZWNrZWRcIiBjbGFzcz1cImN1c3RvbS1jb250cm9sLWlucHV0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwic2VsZWN0UGFnZShpLCBqLCAkZXZlbnQpXCIgaWQ9XCJjdXN0b21Td2l0Y2hlc3JvbGVze3sgaSB9fXt7IGogfX1cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJjdXN0b20tY29udHJvbC1sYWJlbFwiIGZvcj1cImN1c3RvbVN3aXRjaGVzcm9sZXN7eyBpIH19e3sgaiB9fVwiPnt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbi5kZXNjcmlwdGlvbiB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibXQtMlwiPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicHVsbC1yaWdodCBtYi0yIGJ0biBidG4tcHJpbWFyeSBidG5jb21tb25cIiBmaWVsZEtleT1cIlNFVFRJTkdTX1JPTF9BRERfUk9MRVwiXHJcbiAgICAgICAgICAgICAgKGNsaWNrKT1cImFkZFJvbGUoKVwiPlxyXG4gICAgICAgICAgICAgIHt7IHJvbGVJZCA/ICdVcGRhdGUnIDogJ0FkZCcgfX0gUm9sZVxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInB1bGwtcmlnaHQgbWItMiBtci0yIGJ0biBiZy13aGl0ZSB0ZXh0LXByaW1hcnkgYnRuY2FuY2VsXCIgZmllbGRLZXk9XCJTRVRUSU5HU19ST0xfQ0FOQ0VMXCJcclxuICAgICAgICAgICAgICAoY2xpY2spPVwiY2FuY2VsKClcIj5cclxuICAgICAgICAgICAgICBDbGVhclxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8ZGl2ICpuZ0lmPVwiIWZpcnN0VGFiXCI+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQgZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgIDxwLXRyZWUgW3ZhbHVlXT1cIm1haW5NZW51TGlzdFwiIFtkcmFnZ2FibGVOb2Rlc109XCJ0cnVlXCIgW2Ryb3BwYWJsZU5vZGVzXT1cInRydWVcIiBkcmFnZ2FibGVTY29wZT1cInNlbGZcIlxyXG4gICAgICAgICAgICAgIGRyb3BwYWJsZVNjb3BlPVwic2VsZlwiIGNsYXNzPVwidy1mdWxsIG1kOnctMzByZW1cIiBzZWxlY3Rpb25Nb2RlPVwic2luZ2xlXCIgWyhzZWxlY3Rpb24pXT1cInNlbGVjdGVkRmlsZVwiXHJcbiAgICAgICAgICAgICAgW3ZhbGlkYXRlRHJvcF09XCJ0cnVlXCIgKG9uTm9kZURyb3ApPVwibm9kZURyb3AoJGV2ZW50KVwiPjwvcC10cmVlPlxyXG4gICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm10LTJcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInB1bGwtcmlnaHQgbWItMiBidG4gYnRuLXByaW1hcnkgYnRuY29tbW9uXCIgZmllbGRLZXk9XCJTRVRUSU5HU19ST0xfQUREX1JPTEVcIlxyXG4gICAgICAgICAgICAgIChjbGljayk9XCJ1cGRhdGVNZW51T3JkZXIoKVwiPlxyXG4gICAgICAgICAgICAgIFN1Ym1pdFxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIDxiciAvPlxyXG4gICAgICA8L3AtY2FyZD5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG48L2Rpdj5cclxuXHJcbjxkaXYgY2xhc3M9XCJtb2RhbFwiIGlkPVwiRGVsZXRldXNlclwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCI+XHJcbiAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiIHJvbGU9XCJkb2N1bWVudFwiPlxyXG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxyXG4gICAgICAgIDxoNSBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+RGVsZXRlIFJvbGU8L2g1PlxyXG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPlxyXG4gICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XHJcbiAgICAgICAgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGUgUm9sZT9cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2xlYXJmaXhcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibXQtMlwiPlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInB1bGwtcmlnaHQgbWItMiBidG4gYnRuLXByaW1hcnkgYnRuY29tbW9uIGRlbGV0ZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgKGNsaWNrKT1cImRlbGV0ZVJvbGUoKVwiPlxyXG4gICAgICAgICAgICBEZWxldGVcclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInB1bGwtcmlnaHQgbWItMiBtci0yIGJ0biBiZy13aGl0ZSB0ZXh0LXByaW1hcnkgYnRuY2FuY2VsXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5DYW5jZWw8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2xlYXJmaXhcIj48L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuPC9kaXY+Il19